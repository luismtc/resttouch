{"version":3,"sources":["webpack:///src/app/pos/pos-routing.module.ts","webpack:///src/app/pos/components/formaPago/lista-forma-pago/lista-forma-pago.component.ts","webpack:///src/app/pos/components/formaPago/lista-forma-pago/lista-forma-pago.component.html","webpack:///node_modules/js-base64/base64.mjs","webpack:///src/app/admin/services/moneda.service.ts","webpack:///src/app/pos/components/formaPago/forma-pago/forma-pago.component.ts","webpack:///src/app/pos/components/formaPago/forma-pago/forma-pago.component.html","webpack:///src/app/pos/services/factura.service.ts","webpack:///src/app/pos/services/forma-pago.service.ts","webpack:///src/app/pos/components/facturaManual/form-factura-manual/form-factura-manual.component.ts","webpack:///src/app/pos/components/facturaManual/form-factura-manual/form-factura-manual.component.html","webpack:///src/app/pos/services/cobro.service.ts","webpack:///src/app/pos/components/cobrar-pedido/cobrar-pedido.component.ts","webpack:///src/app/pos/components/cobrar-pedido/cobrar-pedido.component.html","webpack:///src/app/pos/components/facturaManual/factura-manual/factura-manual.component.ts","webpack:///src/app/pos/components/facturaManual/factura-manual/factura-manual.component.html","webpack:///src/app/pos/components/formaPago/form-forma-pago/form-forma-pago.component.ts","webpack:///src/app/pos/components/formaPago/form-forma-pago/form-forma-pago.component.html","webpack:///src/app/pos/pos.module.ts","webpack:///src/app/pos/services/factura-serie.service.ts","webpack:///src/app/pos/components/facturaManual/lista-factura-manual/lista-factura-manual.component.ts","webpack:///src/app/pos/components/facturaManual/lista-factura-manual/lista-factura-manual.component.html"],"names":["routes","path","component","canActivate","redirectTo","pathMatch","PosRoutingModule","forChild","ListaFormaPagoComponent","formaPagoSrvc","getFormaPagoEv","length","pageSize","pageSizeOptions","pageIndex","txtFiltro","loadFormasPago","buscar","subscribe","lst","lstFormasPago","applyFilter","getFormaPago","obj","emit","pageChange","e","tmpList","lstFormasPagoPaged","version","VERSION","_hasatob","atob","_hasbtoa","btoa","_hasBuffer","Buffer","_TD","TextDecoder","undefined","_TE","TextEncoder","b64ch","b64chs","b64tab","a","tab","forEach","c","i","b64re","_fromCC","String","fromCharCode","bind","_U8Afrom","Uint8Array","from","it","fn","x","Array","prototype","slice","call","map","_mkUriSafe","src","replace","m0","_tidyB64","s","btoaPolyfill","bin","u32","c0","c1","c2","asc","pad","charCodeAt","TypeError","substring","_btoa","toString","_fromUint8Array","u8a","maxargs","strs","l","push","apply","subarray","join","fromUint8Array","urlsafe","cb_utob","cc","re_utob","utob","u","_encode","encode","encodeURI","re_btou","cb_btou","cccc","cp","offset","btou","b","atobPolyfill","test","u24","r1","r2","charAt","_atob","_toUint8Array","toUint8Array","_unURI","_decode","decode","isValid","_noEnum","v","value","enumerable","writable","configurable","extendString","_add","name","body","Object","defineProperty","extendUint8Array","extendBuiltins","gBase64","fromBase64","toBase64","encodeURL","MonedaService","http","srvcErrHndl","fltr","get","urlCatalogos","pipe","reintentos","errorHandler","FormaPagoComponent","setFormaPago","fp","formaPago","refreshFormaPagoList","lstFormaPagoComponent","forma_pago","descripcion","activo","FacturaService","moduleUrl","entidad","post","urlAppRestaurante","urlFacturacion","idfactura","factura","identidad","params","detalle_factura","FormaPagoService","manteUrl","url","urlMantenimientos","FormFacturaManualComponent","snackBar","dialog","facturaSrvc","facturaSerieSrvc","clienteSrvc","monedaSrvc","articuloSrvc","anulacionSrvc","socket","ls","configSrvc","impresoraSrvc","facturaSavedEv","showForm","showFormDetalle","facturaSeries","clientes","filteredClientes","monedas","detallesFactura","articulos","filteredArticulos","displayedColumns","keyboardLayout","IDIOMA_TECLADO","esMovil","refacturacion","txtArticuloSelected","clienteSelected","razonAnulacion","impresoraPorDefecto","getRazonAnulacion","res","filtrar","filterValue","toLowerCase","filter","nombre","includes","nit","loadImpresoraDefecto","idImpresoraDefecto","getConfig","CONSTANTES","RT_IMPRESORA_DEFECTO","impresora","loadFacturaSeries","loadClientes","loadMonedas","refacturar","factura_serie","cliente","fecha_factura","format","dbDateFormat","moneda","exenta","notas","fel_uuid","fel_uuid_anulacion","resetFactura","resetDetalleFactura","displayCliente","cli","onSubmit","exito","open","duration","save","firmarFactura","dialogRef","maxWidth","data","afterClosed","firmar","resFirma","numero_factura","serie_factura","certificador_fel","mensaje","procesaDetalleFactura","detalle","detFact","d","Cantidad","parseInt","cantidad","Descripcion","articulo","Total","total","PrecioUnitario","precio_unitario","getTotalDetalle","suma","getTotalImpuestosAdicionales","impuestos","imprimirFactura","imprimir","datosAImprimir","NombreEmpresa","empresa","NitEmpresa","SedeEmpresa","sedeFactura","DireccionEmpresa","direccion","Fecha","dateFormat","Nit","receptor","Nombre","Direccion","Serie","Numero","impuestos_adicionales","NoAutorizacion","NombreCertificador","NitCertificador","FechaDeAutorizacion","fecha_autorizacion","NoOrdenEnLinea","FormaDePago","DetalleFactura","ImpuestosAdicionales","Impresora","bluetooth","JSON","stringify","printToBT","msgToPrint","convertir","RT_ENVIA_COMO_BASE64","AppHref","DEEP_LINK_ANDROID","window","location","href","error","anularFactura","input","select","label","datos","valor","id","requerido","resultado","config","anular","resAnula","loadArticulos","getArticulos","displayArticulo","art","detalleFactura","filtrarArticulos","setPrecioUnitario","ev","option","precio","loadDetalleFactura","getDetalle","updateTableDataSource","getDetalleFactura","iddetalle","onSubmitDetail","saveDetalle","dataSource","representacionGrafica","getGrafo","tipo","openLinkWindow","documento","openPdfDocument","pdf","pdfWindow","document","write","usrTokenVar","enmovil","sede_uuid","on","CobroService","cuenta","CobrarPedidoComponent","cobroSrvc","sedeSrvc","comandaSrvc","inputData","formasPagoDeCuenta","facturando","cargandoConf","w","h","pideDocumento","sedes","datosPedido","sede","direccion_entrega","telefono","endSubs","resetFactReq","factReq","cuentas","processData","totalDeCuenta","productosACobrar","item","monto_extra","calculaPropina","actualizaSaldo","monto","parseFloat","saldo","toFixed","clientePedido","setClienteFacturar","loadSedes","add","montoPropina","porcentajePropina","addFormaPago","f","pedirautorizacion","vpgtRef","width","disableClose","agregaFormaPago","propina","comision_monto","comision_porcentaje","delFormaPago","idx","splice","sumFormasPago","cancelar","close","mesaenuso","mesa","escallcenter","cobrar","objCobro","idcuenta","propina_monto","propina_porcentaje","sumaMontoComision","enviarPedido","facturada","facturar","resFact","confirmRef","confirma","printFactura","cobro","apellidos","correo","pedido","comanda","dateFormatBT","onSelectionChangeFP","msc","findIndex","lfp","pedirdocumento","unsubscribe","FacturaManualComponent","setFactura","fact","usuario","frmFactura","refreshFacturaList","lstFacturaComponent","loadFacturas","FormFormaPagoComponent","formaPagoSavedEv","resetFormaPago","PosModule","FacturaSerieService","ListaFacturaManualComponent","getFacturaEv","verTodas","rango","fdel","fal","_todas","_fdel","_fal","lstFacturas","cargarFacturas","getFactura","startOf","endOf","lstFacturasPaged"],"mappings":"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","file":"default~pos-pos-module~restaurante-restaurante-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { AuthguardService as AuthGuard } from '../admin/services/authguard.service';\n\nimport { FormaPagoComponent } from './components/formaPago/forma-pago/forma-pago.component';\nimport { FacturaManualComponent } from './components/facturaManual/factura-manual/factura-manual.component';\n\nconst routes: Routes = [\n  { path: 'fpago', component: FormaPagoComponent, canActivate: [AuthGuard] },\n  { path: 'factman', component: FacturaManualComponent, canActivate: [AuthGuard] },\n  { path: '**', redirectTo: '/admin/dashboard', pathMatch: 'full' }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PosRoutingModule { }\n","import { Component, OnInit, Output, EventEmitter, ViewChild } from '@angular/core';\nimport { PageEvent } from '@angular/material/paginator';\nimport { PaginarArray, MultiFiltro } from '../../../../shared/global';\n\nimport { FormaPago } from '../../../interfaces/forma-pago';\nimport { FormaPagoService } from '../../../services/forma-pago.service';\n\n@Component({\n  selector: 'app-lista-forma-pago',\n  templateUrl: './lista-forma-pago.component.html',\n  styleUrls: ['./lista-forma-pago.component.css']\n})\nexport class ListaFormaPagoComponent implements OnInit {\n\n  public lstFormasPago: FormaPago[];\n  public lstFormasPagoPaged: FormaPago[];\n  @Output() getFormaPagoEv = new EventEmitter();\n\n  public length = 0;\n  public pageSize = 5;\n  public pageSizeOptions: number[] = [5, 10, 15];\n  public pageIndex = 0;\n  public pageEvent: PageEvent;\n  public txtFiltro = '';\n\n  constructor(\n    private formaPagoSrvc: FormaPagoService\n  ) { }\n\n  ngOnInit() {\n    this.loadFormasPago();\n  }\n\n  applyFilter() {\n    if (this.txtFiltro.length > 0) {\n      const tmpList = MultiFiltro(this.lstFormasPago, this.txtFiltro);\n      this.length = tmpList.length;\n      this.lstFormasPagoPaged = PaginarArray(tmpList, this.pageSize, this.pageIndex + 1);\n    } else {\n      this.length = this.lstFormasPago.length;\n      this.lstFormasPagoPaged = PaginarArray(this.lstFormasPago, this.pageSize, this.pageIndex + 1);\n    }\n  }\n\n  loadFormasPago = () => {\n    this.formaPagoSrvc.buscar().subscribe(lst => {\n      if (lst) {\n        if (lst.length > 0) {\n          this.lstFormasPago = lst;\n          this.applyFilter();\n        }\n      }\n    });\n  }\n\n  getFormaPago = (obj: FormaPago) => {\n    this.getFormaPagoEv.emit(obj);\n  }\n\n  pageChange = (e: PageEvent) => {\n    this.pageSize = e.pageSize;\n    this.pageIndex = e.pageIndex;\n    this.applyFilter();\n  }\n}\n","<mat-card class=\"mat-elevation-z4 fullWidth\">\n    <mat-card-content>\n        <mat-form-field class=\"fullWidth\">\n            <input matInput (keyup)=\"applyFilter()\" placeholder=\"Buscar...\" [(ngModel)]=\"txtFiltro\" [ngModelOptions]=\"{standalone: true}\">\n        </mat-form-field>\n        <mat-nav-list>\n            <mat-list-item *ngFor=\"let element of lstFormasPagoPaged\" (click)=\"getFormaPago(element)\">\n                <mat-icon mat-list-icon>account_balance_wallet</mat-icon>\n                <h5 mat-line>{{element.descripcion}}</h5>\n            </mat-list-item>            \n        </mat-nav-list>\n        <mat-paginator [length]=\"length\" [pageSize]=\"pageSize\" [pageSizeOptions]=\"pageSizeOptions\" (page)=\"pageChange($event)\" showFirstLastButtons>\n        </mat-paginator>\n    </mat-card-content>\n</mat-card>\n","/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.6.0';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasatob = typeof atob === 'function';\nconst _hasbtoa = typeof btoa === 'function';\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = [...b64ch];\nconst b64tab = ((a) => {\n    let tab = {};\n    a.forEach((c, i) => tab[c] = i);\n    return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function'\n    ? Uint8Array.from.bind(Uint8Array)\n    : (it, fn = (x) => x) => new Uint8Array(Array.prototype.slice.call(it, 0).map(fn));\nconst _mkUriSafe = (src) => src\n    .replace(/[+\\/]/g, (m0) => m0 == '+' ? '-' : '_')\n    .replace(/=+$/m, '');\nconst _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = (bin) => {\n    // console.log('polyfilled');\n    let u32, c0, c1, c2, asc = '';\n    const pad = bin.length % 3;\n    for (let i = 0; i < bin.length;) {\n        if ((c0 = bin.charCodeAt(i++)) > 255 ||\n            (c1 = bin.charCodeAt(i++)) > 255 ||\n            (c2 = bin.charCodeAt(i++)) > 255)\n            throw new TypeError('invalid character found');\n        u32 = (c0 << 16) | (c1 << 8) | c2;\n        asc += b64chs[u32 >> 18 & 63]\n            + b64chs[u32 >> 12 & 63]\n            + b64chs[u32 >> 6 & 63]\n            + b64chs[u32 & 63];\n    }\n    return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = _hasbtoa ? (bin) => btoa(bin)\n    : _hasBuffer ? (bin) => Buffer.from(bin, 'binary').toString('base64')\n        : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer\n    ? (u8a) => Buffer.from(u8a).toString('base64')\n    : (u8a) => {\n        // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n        const maxargs = 0x1000;\n        let strs = [];\n        for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n            strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n        }\n        return _btoa(strs.join(''));\n    };\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 5\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = (c) => {\n    if (c.length < 2) {\n        var cc = c.charCodeAt(0);\n        return cc < 0x80 ? c\n            : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                + _fromCC(0x80 | (cc & 0x3f)))\n                : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                    + _fromCC(0x80 | (cc & 0x3f)));\n    }\n    else {\n        var cc = 0x10000\n            + (c.charCodeAt(0) - 0xD800) * 0x400\n            + (c.charCodeAt(1) - 0xDC00);\n        return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n            + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n            + _fromCC(0x80 | (cc & 0x3f)));\n    }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = (u) => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer\n    ? (s) => Buffer.from(s, 'utf8').toString('base64')\n    : _TE\n        ? (s) => _fromUint8Array(_TE.encode(s))\n        : (s) => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe\n    ? _mkUriSafe(_encode(src))\n    : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 5.\n * @returns {string} Base64 string\n */\nconst encodeURI = (src) => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = (cccc) => {\n    switch (cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                | ((0x3f & cccc.charCodeAt(1)) << 12)\n                | ((0x3f & cccc.charCodeAt(2)) << 6)\n                | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n            return (_fromCC((offset >>> 10) + 0xD800)\n                + _fromCC((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\n                | (0x3f & cccc.charCodeAt(2)));\n        default:\n            return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                | (0x3f & cccc.charCodeAt(1)));\n    }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = (b) => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = (asc) => {\n    // console.log('polyfilled');\n    asc = asc.replace(/\\s+/g, '');\n    if (!b64re.test(asc))\n        throw new TypeError('malformed base64.');\n    asc += '=='.slice(2 - (asc.length & 3));\n    let u24, bin = '', r1, r2;\n    for (let i = 0; i < asc.length;) {\n        u24 = b64tab[asc.charAt(i++)] << 18\n            | b64tab[asc.charAt(i++)] << 12\n            | (r1 = b64tab[asc.charAt(i++)]) << 6\n            | (r2 = b64tab[asc.charAt(i++)]);\n        bin += r1 === 64 ? _fromCC(u24 >> 16 & 255)\n            : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255)\n                : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);\n    }\n    return bin;\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = _hasatob ? (asc) => atob(_tidyB64(asc))\n    : _hasBuffer ? (asc) => Buffer.from(asc, 'base64').toString('binary')\n        : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer\n    ? (a) => _U8Afrom(Buffer.from(a, 'base64'))\n    : (a) => _U8Afrom(_atob(a), c => c.charCodeAt(0));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = (a) => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer\n    ? (a) => Buffer.from(a, 'base64').toString('utf8')\n    : _TD\n        ? (a) => _TD.decode(_toUint8Array(a))\n        : (a) => btou(_atob(a));\nconst _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = (src) => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = (src) => {\n    if (typeof src !== 'string')\n        return false;\n    const s = src.replace(/\\s+/g, '').replace(/=+$/, '');\n    return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = (v) => {\n    return {\n        value: v, enumerable: false, writable: true, configurable: true\n    };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n    const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n    _add('fromBase64', function () { return decode(this); });\n    _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n    _add('toBase64URI', function () { return encode(this, true); });\n    _add('toBase64URL', function () { return encode(this, true); });\n    _add('toUint8Array', function () { return toUint8Array(this); });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n    const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n    _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n    _add('toBase64URI', function () { return fromUint8Array(this, true); });\n    _add('toBase64URL', function () { return fromUint8Array(this, true); });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n    extendString();\n    extendUint8Array();\n};\nconst gBase64 = {\n    version: version,\n    VERSION: VERSION,\n    atob: _atob,\n    atobPolyfill: atobPolyfill,\n    btoa: _btoa,\n    btoaPolyfill: btoaPolyfill,\n    fromBase64: decode,\n    toBase64: encode,\n    encode: encode,\n    encodeURI: encodeURI,\n    encodeURL: encodeURI,\n    utob: utob,\n    btou: btou,\n    decode: decode,\n    isValid: isValid,\n    fromUint8Array: fromUint8Array,\n    toUint8Array: toUint8Array,\n    extendString: extendString,\n    extendUint8Array: extendUint8Array,\n    extendBuiltins: extendBuiltins,\n};\n// makecjs:CUT //\nexport { version };\nexport { VERSION };\nexport { _atob as atob };\nexport { atobPolyfill };\nexport { _btoa as btoa };\nexport { btoaPolyfill };\nexport { decode as fromBase64 };\nexport { encode as toBase64 };\nexport { utob };\nexport { encode };\nexport { encodeURI };\nexport { encodeURI as encodeURL };\nexport { btou };\nexport { decode };\nexport { isValid };\nexport { fromUint8Array };\nexport { toUint8Array };\nexport { extendString };\nexport { extendUint8Array };\nexport { extendBuiltins };\n// and finally,\nexport { gBase64 as Base64 };\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { GLOBAL } from '../../shared/global';\nimport { ServiceErrorHandler } from '../../shared/error-handler';\nimport { Moneda } from '../interfaces/moneda';\nimport { Observable } from 'rxjs';\nimport { retry, catchError } from 'rxjs/operators';\nimport * as qs from 'qs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MonedaService {\n\n  private srvcErrHndl: ServiceErrorHandler;\n\n  constructor(\n    private http: HttpClient,\n  ) {\n    this.srvcErrHndl = new ServiceErrorHandler();\n  }\n\n  get(fltr: any = {}): Observable<Moneda[]> {\n    return this.http.get<Moneda[]>(\n      `${GLOBAL.urlCatalogos}/get_moneda?${qs.stringify(fltr)}`\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n}\n","import { Component, OnInit, ViewChild } from '@angular/core';\n\nimport { ListaFormaPagoComponent } from '../lista-forma-pago/lista-forma-pago.component';\nimport { FormaPago } from '../../../interfaces/forma-pago';\n\n@Component({\n  selector: 'app-forma-pago',\n  templateUrl: './forma-pago.component.html',\n  styleUrls: ['./forma-pago.component.css']\n})\nexport class FormaPagoComponent implements OnInit {\n\n  public formaPago: FormaPago;\n  @ViewChild('lstFormaPago') lstFormaPagoComponent: ListaFormaPagoComponent;\n\n  constructor() {\n    this.formaPago = { forma_pago: null, descripcion: null, activo: 1 };\n  }\n\n  ngOnInit() {\n  }\n\n  setFormaPago = (fp: FormaPago) => this.formaPago = fp;\n\n  refreshFormaPagoList = () => this.lstFormaPagoComponent.loadFormasPago();\n\n}\n","<div class=\"row\">\n    <div class=\"col m5 s12\">\n        <app-lista-forma-pago #lstFormaPago (getFormaPagoEv)=\"setFormaPago($event)\"></app-lista-forma-pago>\n    </div>\n    <div class=\"col m7 s12\">\n        <app-form-forma-pago #frmIngreso [formaPago]=\"formaPago\" (formaPagoSavedEv)=\"refreshFormaPagoList()\">\n        </app-form-forma-pago>\n    </div>\n</div>","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { GLOBAL } from '../../shared/global';\nimport { ServiceErrorHandler } from '../../shared/error-handler';\nimport { FacturaRequest, Factura } from '../interfaces/factura';\nimport { DetalleFactura } from '../interfaces/detalle-factura';\nimport { Observable } from 'rxjs';\nimport { retry, catchError } from 'rxjs/operators';\nimport * as qs from 'qs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FacturaService {\n\n  private srvcErrHndl: ServiceErrorHandler;\n  private moduleUrl = 'factura';\n\n  constructor(\n    private http: HttpClient\n  ) {\n    this.srvcErrHndl = new ServiceErrorHandler();\n  }\n\n  facturar(entidad: FacturaRequest): Observable<any> {\n    return this.http.post<any>(\n      `${GLOBAL.urlAppRestaurante}/${this.moduleUrl}/guardar`,\n      entidad\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  get(fltr: any = {}): Observable<Factura[]> {\n    return this.http.get<Factura[]>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/buscar_factura?${qs.stringify(fltr)}`\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  imprimir(idfactura: number): Observable<any> {\n    return this.http.get<any>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/imprimir/${idfactura}`\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  save(entidad: Factura): Observable<any> {\n    return this.http.post<any>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/guardar${!!entidad.factura ? ('/' + entidad.factura) : ''}`,\n      entidad\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  refacturar(entidad: Factura): Observable<any> {\n    return this.http.post<any>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/refacturar${!!entidad.factura ? ('/' + entidad.factura) : ''}`,\n      entidad\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  firmar(identidad: number): Observable<any> {\n    return this.http.post<any>(`${GLOBAL.urlFacturacion}/${this.moduleUrl}/facturar/${identidad}`, {}\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  anular(identidad: number, params: any = {}): Observable<any> {\n    return this.http.post<any>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/anular/${identidad}`,\n      params\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  getDetalle(idfactura: number, fltr: any = {}): Observable<DetalleFactura[]> {\n    return this.http.get<DetalleFactura[]>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/buscar_detalle/${idfactura}?${qs.stringify(fltr)}`\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  saveDetalle(entidad: DetalleFactura): Observable<any> {\n    return this.http.post<any>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/guardar_detalle/${entidad.factura}${!!entidad.detalle_factura ? ('/' + entidad.detalle_factura) : ''}`,\n      entidad\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  getGrafo(idfactura: number): Observable<any> {\n    return this.http.get<DetalleFactura[]>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/get_grafo_factura/${idfactura}`\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { GLOBAL } from '../../shared/global';\nimport { ServiceErrorHandler } from '../../shared/error-handler';\nimport { FormaPago } from '../interfaces/forma-pago';\n// import { LocalstorageService } from '../../admin/services/localstorage.service';\nimport { Observable } from 'rxjs';\nimport { retry, catchError } from 'rxjs/operators';\nimport * as qs from 'qs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FormaPagoService {\n\n  private srvcErrHndl: ServiceErrorHandler;\n  private moduleUrl = 'catalogo';\n  private manteUrl = 'fpago';\n  // private usrToken: string = null;\n\n  constructor(\n    private http: HttpClient,\n    // private ls: LocalstorageService\n  ) {\n    this.srvcErrHndl = new ServiceErrorHandler();\n    // this.usrToken = this.ls.get(GLOBAL.usrTokenVar) ? this.ls.get(GLOBAL.usrTokenVar).token : null;\n  }\n\n  get(fltr: any = {}): Observable<FormaPago[]> {\n    /* const httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': this.usrToken\n      })\n    }; */\n    return this.http.get<FormaPago[]>(\n      `${GLOBAL.url}/${this.moduleUrl}/get_forma_pago?${qs.stringify(fltr)}`\n      // , httpOptions\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  buscar(fltr: any = {}): Observable<FormaPago[]> {\n    /* const httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': this.usrToken\n      })\n    }; */\n    return this.http.get<FormaPago[]>(\n      `${GLOBAL.urlMantenimientos}/${this.manteUrl}/buscar?${qs.stringify(fltr)}`\n      // , httpOptions\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  save(entidad: FormaPago): Observable<any> {\n    /* const httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': this.usrToken\n      })\n    }; */\n    return this.http.post<any>(\n      `${GLOBAL.urlMantenimientos}/${this.manteUrl}/guardar${!!entidad.forma_pago ? ('/' + entidad.forma_pago) : ''}`, entidad\n      // , httpOptions\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nimport { MatAutocompleteSelectedEvent } from '@angular/material/autocomplete';\r\nimport { GLOBAL } from '../../../../shared/global';\r\nimport * as moment from 'moment';\r\nimport { ConfirmDialogModel, ConfirmDialogComponent } from '../../../../shared/components/confirm-dialog/confirm-dialog.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Socket } from 'ngx-socket-io';\r\nimport { LocalstorageService } from '../../../../admin/services/localstorage.service';\r\n\r\nimport { Factura } from '../../../interfaces/factura';\r\nimport { DetalleFactura } from '../../../interfaces/detalle-factura';\r\nimport { FacturaService } from '../../../services/factura.service';\r\nimport { RazonAnulacion } from '../../../../admin/interfaces/razon-anulacion';\r\nimport { AnulacionService } from '../../../../admin/services/anulacion.service';\r\n\r\nimport { FacturaSerie } from '../../../interfaces/factura-serie';\r\nimport { FacturaSerieService } from '../../../services/factura-serie.service';\r\nimport { Cliente } from '../../../../admin/interfaces/cliente';\r\nimport { ClienteService } from '../../../../admin/services/cliente.service';\r\nimport { Moneda } from '../../../../admin/interfaces/moneda';\r\nimport { MonedaService } from '../../../../admin/services/moneda.service';\r\nimport { Articulo } from '../../../../wms/interfaces/articulo';\r\nimport { ArticuloService } from '../../../../wms/services/articulo.service';\r\n\r\nimport { Impresora } from '../../../../admin/interfaces/impresora';\r\nimport { ImpresoraService } from '../../../../admin/services/impresora.service';\r\nimport { ConfiguracionService } from '../../../../admin/services/configuracion.service';\r\nimport { Base64 } from 'js-base64';\r\n\r\n@Component({\r\n  selector: 'app-form-factura-manual',\r\n  templateUrl: './form-factura-manual.component.html',\r\n  styleUrls: ['./form-factura-manual.component.css']\r\n})\r\nexport class FormFacturaManualComponent implements OnInit {\r\n\r\n  @Input() factura: Factura;\r\n  @Output() facturaSavedEv = new EventEmitter();\r\n\r\n  public showForm = true;\r\n  public showFormDetalle = true;\r\n  public facturaSeries: FacturaSerie[] = [];\r\n  public clientes: Cliente[] = [];\r\n  public filteredClientes: Cliente[] = [];\r\n  public monedas: Moneda[] = [];\r\n  public detallesFactura: DetalleFactura[] = [];\r\n  public detalleFactura: DetalleFactura;\r\n  public articulos: Articulo[] = [];\r\n  public filteredArticulos: Articulo[] = [];\r\n  public displayedColumns: string[] = ['articulo', 'cantidad', 'precio_unitario', 'total', 'editItem'];\r\n  public dataSource: MatTableDataSource<DetalleFactura>;\r\n  public keyboardLayout = GLOBAL.IDIOMA_TECLADO;\r\n  public esMovil = false;\r\n  public refacturacion = false;\r\n  public txtArticuloSelected: (Articulo | string) = undefined;\r\n  public clienteSelected: (Cliente | string) = undefined;\r\n  public razonAnulacion: RazonAnulacion[] = [];\r\n  public impresoraPorDefecto: Impresora = null;\r\n\r\n  constructor(\r\n    private snackBar: MatSnackBar,\r\n    public dialog: MatDialog,\r\n    private facturaSrvc: FacturaService,\r\n    private facturaSerieSrvc: FacturaSerieService,\r\n    private clienteSrvc: ClienteService,\r\n    private monedaSrvc: MonedaService,\r\n    private articuloSrvc: ArticuloService,\r\n    private anulacionSrvc: AnulacionService,\r\n    private socket: Socket,\r\n    private ls: LocalstorageService,\r\n    private configSrvc: ConfiguracionService,\r\n    private impresoraSrvc: ImpresoraService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.esMovil = this.ls.get(GLOBAL.usrTokenVar).enmovil || false;\r\n    this.refacturacion = false;\r\n    this.resetFactura();\r\n    this.loadFacturaSeries();\r\n    this.loadClientes();\r\n    this.loadMonedas();\r\n    this.loadArticulos();\r\n    this.getRazonAnulacion();\r\n    this.loadImpresoraDefecto();\r\n    if (!!this.ls.get(GLOBAL.usrTokenVar).sede_uuid) {\r\n      this.socket.emit('joinRestaurant', this.ls.get(GLOBAL.usrTokenVar).sede_uuid);\r\n      this.socket.on('reconnect', () => this.socket.emit('joinRestaurant', this.ls.get(GLOBAL.usrTokenVar).sede_uuid));\r\n    }\r\n  }\r\n\r\n  getRazonAnulacion = () => {\r\n    this.anulacionSrvc.get().subscribe(res => {\r\n      this.razonAnulacion = res;\r\n    })\r\n  }\r\n\r\n  filtrar = (value: (Cliente | string)) => {\r\n    if (value && (typeof value === 'string')) {\r\n      const filterValue = value.toLowerCase();\r\n      this.filteredClientes =\r\n        this.clientes.filter(c => c.nombre.toLowerCase().includes(filterValue) || c.nit.toLowerCase().includes(filterValue));\r\n    } else {\r\n      this.filteredClientes = this.clientes;\r\n    }\r\n  }\r\n\r\n  loadImpresoraDefecto = () => {\r\n    const idImpresoraDefecto: number = +this.configSrvc.getConfig(GLOBAL.CONSTANTES.RT_IMPRESORA_DEFECTO) || 0;\r\n    if (idImpresoraDefecto > 0) {\r\n      this.impresoraSrvc.get({ impresora: idImpresoraDefecto }).subscribe((res: Impresora[]) => {\r\n        if (res && res.length > 0) {\r\n          this.impresoraPorDefecto = res[0];\r\n        } else {\r\n          this.impresoraPorDefecto = null;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  loadFacturaSeries = () => {\r\n    this.facturaSerieSrvc.get().subscribe(res => {\r\n      if (res) {\r\n        this.facturaSeries = res;\r\n      }\r\n    });\r\n  }\r\n\r\n  loadClientes = () => {\r\n    this.clienteSrvc.get().subscribe(res => {\r\n      if (res) {\r\n        this.clientes = res;\r\n        this.filteredClientes = this.clientes;\r\n      }\r\n    });\r\n  }\r\n\r\n  loadMonedas = () => {\r\n    this.monedaSrvc.get().subscribe(res => {\r\n      if (res) {\r\n        this.monedas = res;\r\n      }\r\n    });\r\n  }\r\n\r\n  refacturar = () => {\r\n    this.factura = {\r\n      factura: this.factura.factura, factura_serie: null, cliente: null,\r\n      fecha_factura: moment().format(GLOBAL.dbDateFormat), moneda: null, exenta: 0, notas: null,\r\n      fel_uuid: null, fel_uuid_anulacion: null\r\n    };\r\n    this.refacturacion = true;\r\n  }\r\n\r\n  resetFactura = () => {\r\n    this.factura = {\r\n      factura: null, factura_serie: null, cliente: null,\r\n      fecha_factura: moment().format(GLOBAL.dbDateFormat), moneda: null, exenta: 0, notas: null,\r\n      fel_uuid: null, fel_uuid_anulacion: null\r\n    };\r\n    this.clienteSelected = undefined;\r\n    this.resetDetalleFactura();\r\n    this.detallesFactura = [];\r\n  }\r\n\r\n  displayCliente = (cli: Cliente) => {\r\n    if (cli) {\r\n      this.factura.cliente = cli.cliente;\r\n      return cli.nombre;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  onSubmit = () => {\r\n    // console.log(this.factura); return;\r\n    if (this.refacturacion) {\r\n      this.facturaSrvc.refacturar(this.factura).subscribe(res => {\r\n        if (res.exito) {\r\n          this.facturaSavedEv.emit();\r\n          this.resetFactura();\r\n          this.refacturacion = false;\r\n          this.factura = {\r\n            factura: res.factura.factura,\r\n            factura_serie: res.factura.factura_serie,\r\n            cliente: res.factura.cliente,\r\n            fecha_factura: res.factura.fecha_factura,\r\n            moneda: res.factura.moneda,\r\n            exenta: +res.factura.exenta,\r\n            notas: res.factura.notas,\r\n            fel_uuid: res.factura.fel_uuid\r\n          };\r\n          this.snackBar.open('Factura manual agregada...', 'Factura', { duration: 3000 });\r\n        }\r\n      });\r\n    } else {\r\n      this.facturaSrvc.save(this.factura).subscribe(res => {\r\n        if (res.exito) {\r\n          this.facturaSavedEv.emit();\r\n          this.resetFactura();\r\n          this.factura = {\r\n            factura: res.factura.factura,\r\n            factura_serie: res.factura.factura_serie,\r\n            cliente: res.factura.cliente,\r\n            fecha_factura: res.factura.fecha_factura,\r\n            moneda: res.factura.moneda,\r\n            exenta: +res.factura.exenta,\r\n            notas: res.factura.notas,\r\n            fel_uuid: res.factura.fel_uuid\r\n          }\r\n          this.snackBar.open('Factura manual agregada...', 'Factura', { duration: 3000 });\r\n        }\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  firmarFactura = () => {\r\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\r\n      maxWidth: '400px',\r\n      data: new ConfirmDialogModel(\r\n        'Firmar factura',\r\n        'Luego de firmar la factura no podr hacer ninguna modificacin. Desea continuar?',\r\n        'S', 'No'\r\n      )\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe(res => {\r\n      if (res) {\r\n        this.facturaSrvc.firmar(+this.factura.factura).subscribe(resFirma => {\r\n          if (resFirma.exito) {\r\n            this.factura.numero_factura = resFirma.factura.numero_factura;\r\n            this.factura.serie_factura = resFirma.factura.serie_factura;\r\n            this.factura.certificador_fel = resFirma.factura.certificador_fel;\r\n            this.factura.fel_uuid = resFirma.factura.fel_uuid;\r\n            this.facturaSavedEv.emit();\r\n            this.snackBar.open('Factura firmada con xito...', 'Firmar', { duration: 3000 });\r\n          } else {\r\n            this.snackBar.open(`ERROR: ${resFirma.mensaje}`, 'Firmar', { duration: 3000 });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  procesaDetalleFactura = (detalle: any[]) => {\r\n    const detFact: any[] = [];\r\n    detalle.forEach(d => detFact.push({\r\n      Cantidad: parseInt(d.cantidad),\r\n      Descripcion: d.articulo.descripcion,\r\n      Total: +d.total,\r\n      PrecioUnitario: +d.precio_unitario\r\n    }));\r\n    return detFact;\r\n  }\r\n\r\n  getTotalDetalle = (detalle: any[]): number => {\r\n    let suma = 0.00;\r\n    detalle.forEach(d => suma += +d.total);\r\n    return suma;\r\n  }\r\n\r\n  getTotalImpuestosAdicionales = (impuestos: any[]) => {\r\n    let suma = 0.00;\r\n    impuestos.forEach(i => suma += +i.total);\r\n    return suma;\r\n  }\r\n\r\n  imprimirFactura = () => {\r\n    // console.log(this.factura);\r\n    this.facturaSrvc.imprimir(+this.factura.factura).subscribe(res => {\r\n      if (res.factura) {\r\n        // console.log(res.factura);\r\n\r\n        const datosAImprimir = {\r\n          NombreEmpresa: res.factura.empresa.nombre,\r\n          NitEmpresa: res.factura.empresa.nit,\r\n          SedeEmpresa: res.factura.sedeFactura.nombre,\r\n          DireccionEmpresa: res.factura.empresa.direccion,\r\n          Fecha: moment(res.factura.fecha_factura).format(GLOBAL.dateFormat),\r\n          Nit: res.factura.receptor.nit,\r\n          Nombre: res.factura.receptor.nombre,\r\n          Direccion: res.factura.receptor.direccion,\r\n          Serie: res.factura.serie_factura,\r\n          Numero: res.factura.numero_factura,\r\n          Total: this.getTotalDetalle(res.factura.detalle) + this.getTotalImpuestosAdicionales((res.factura.impuestos_adicionales || [])),\r\n          NoAutorizacion: res.factura.fel_uuid,\r\n          NombreCertificador: res.factura.certificador_fel.nombre,\r\n          NitCertificador: res.factura.certificador_fel.nit,\r\n          FechaDeAutorizacion: res.factura.fecha_autorizacion,\r\n          NoOrdenEnLinea: '',\r\n          FormaDePago: '',\r\n          DetalleFactura: this.procesaDetalleFactura(res.factura.detalle),\r\n          ImpuestosAdicionales: (res.factura.impuestos_adicionales || []),\r\n          Impresora: this.impresoraPorDefecto\r\n        };\r\n\r\n        if (this.impresoraPorDefecto) {\r\n          if (+this.impresoraPorDefecto.bluetooth === 0) {\r\n            this.socket.emit(`print:factura`, `${JSON.stringify(datosAImprimir)}`);\r\n          } else {\r\n            this.printToBT(JSON.stringify(datosAImprimir));\r\n          }\r\n        } else {\r\n          delete datosAImprimir.Impresora;\r\n          this.socket.emit(`print:factura`, `${JSON.stringify(datosAImprimir)}`);\r\n        }\r\n\r\n        this.snackBar.open(\r\n          `Imprimiendo factura ${this.factura.serie_factura}-${this.factura.numero_factura}`,\r\n          'Impresin', { duration: 3000 }\r\n        );\r\n      } else {\r\n        this.snackBar.open(`ERROR: ${res.mensaje}`, 'Impresin', { duration: 3000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  printToBT = (msgToPrint: string = '') => {\r\n    const convertir = this.configSrvc.getConfig(GLOBAL.CONSTANTES.RT_ENVIA_COMO_BASE64);    \r\n    const data = convertir ? Base64.encode(msgToPrint, true) : msgToPrint;\r\n    // const AppHref = `${GLOBAL.DEEP_LINK_ANDROID}${data}`;\r\n    const AppHref = GLOBAL.DEEP_LINK_ANDROID.replace('__INFOBASE64__', data);\r\n    try {\r\n      window.location.href = AppHref;\r\n    } catch (error) {\r\n      this.snackBar.open('No se pudo conectar con la aplicacin de impresin', 'Comanda', { duration: 3000 });\r\n    }\r\n  }\r\n\r\n  anularFactura = () => {\r\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\r\n      maxWidth: '400px',\r\n      data: new ConfirmDialogModel(\r\n        'Anular factura',\r\n        'Luego de anular la factura no podr hacer ninguna modificacin. Desea continuar?',\r\n        'S',\r\n        'No',\r\n        {\r\n          input: [\r\n            {\r\n              select: true,\r\n              label: 'Motivo',\r\n              datos: this.razonAnulacion,\r\n              valor: null,\r\n              id: 'razon_anulacion',\r\n              descripcion: 'descripcion',\r\n              requerido: true\r\n            },\r\n            {\r\n              select: false,\r\n              label: 'Comentario',\r\n              valor: null,\r\n              id: 'comentario_anulacion',\r\n              requerido: false\r\n            }\r\n          ]\r\n        }\r\n      )\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe(res => {\r\n      if (res.resultado) {\r\n        const params = {};\r\n        for (let i = 0; i < res.config.input.length; i++) {\r\n          const input = res.config.input[i];\r\n          params[input.id] = input.valor;\r\n        }\r\n\r\n        this.facturaSrvc.anular(+this.factura.factura, params).subscribe(resAnula => {\r\n          if (resAnula.exito) {\r\n            this.factura.fel_uuid_anulacion = resAnula.factura.fel_uuid_anulacion;\r\n            this.facturaSavedEv.emit();\r\n            this.snackBar.open('Factura anulada con xito...', 'Firmar', { duration: 3000 });\r\n          } else {\r\n            this.snackBar.open(`ERROR: ${resAnula.mensaje}`, 'Firmar', { duration: 10000 });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  loadArticulos = () => {\r\n    this.articuloSrvc.getArticulos().subscribe(res => {\r\n      if (res) {\r\n        this.articulos = res;\r\n        this.filteredArticulos = this.articulos;\r\n      }\r\n    });\r\n  }\r\n\r\n  displayArticulo = (art: Articulo) => {\r\n    if (art) {\r\n      this.detalleFactura.articulo = art.articulo;\r\n      return art.descripcion;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  filtrarArticulos = (value: (Articulo | string)) => {\r\n    if (value && (typeof value === 'string')) {\r\n      const filterValue = value.toLowerCase();\r\n      this.filteredArticulos =\r\n        this.articulos.filter(a => a.descripcion.toLowerCase().includes(filterValue));\r\n    } else {\r\n      this.filteredArticulos = this.articulos;\r\n    }\r\n  }\r\n\r\n  setPrecioUnitario = (ev: MatAutocompleteSelectedEvent) => {\r\n    const obj: Articulo = ev.option.value;\r\n    this.detalleFactura.precio_unitario = +obj.precio;\r\n    this.detalleFactura.total = +this.detalleFactura.precio_unitario * +this.detalleFactura.cantidad;\r\n  }\r\n\r\n  resetDetalleFactura = () => {\r\n    this.detalleFactura = {\r\n      detalle_factura: null, factura: (this.factura.factura || 0), articulo: null, cantidad: 1, precio_unitario: null, total: null\r\n    };\r\n    this.txtArticuloSelected = undefined;\r\n  }\r\n\r\n  loadDetalleFactura = (idfactura: number = +this.factura.factura) => {\r\n    this.facturaSrvc.getDetalle(idfactura, { factura: idfactura }).subscribe(res => {\r\n      // console.log(res);\r\n      if (res) {\r\n        this.detallesFactura = res;\r\n        this.updateTableDataSource();\r\n      }\r\n    });\r\n  }\r\n\r\n  getDetalleFactura = (idfactura: number = +this.factura.factura, iddetalle: number) => {\r\n    this.facturaSrvc.getDetalle(idfactura, { detalle_factura: iddetalle }).subscribe((res: any[]) => {\r\n      // console.log(res);\r\n      if (res) {\r\n        this.detalleFactura = {\r\n          detalle_factura: res[0].detalle_factura,\r\n          factura: res[0].factura,\r\n          articulo: res[0].articulo.articulo,\r\n          cantidad: +res[0].cantidad,\r\n          precio_unitario: +res[0].precio_unitario,\r\n          total: +res[0].total\r\n        };\r\n        this.txtArticuloSelected = res[0].articulo;\r\n        this.showFormDetalle = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  onSubmitDetail = () => {\r\n    this.detalleFactura.factura = this.factura.factura;\r\n    this.detalleFactura.total = +this.detalleFactura.precio_unitario * +this.detalleFactura.cantidad;\r\n    // console.log(this.detalleFactura);\r\n    this.facturaSrvc.saveDetalle(this.detalleFactura).subscribe(res => {\r\n      // console.log(res);\r\n      if (res) {\r\n        this.loadDetalleFactura();\r\n        this.resetDetalleFactura();\r\n      }\r\n    });\r\n  }\r\n\r\n  updateTableDataSource = () => this.dataSource = new MatTableDataSource(this.detallesFactura);\r\n\r\n  representacionGrafica = () => {\r\n\r\n    this.facturaSrvc.getGrafo(this.factura.factura).subscribe(res => {\r\n      if (res.exito) {\r\n        switch (res.tipo) {\r\n          case 'link': this.openLinkWindow(res.documento); break;\r\n          case 'pdf': this.openPdfDocument(res.documento); break;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  openLinkWindow = (url: string) =>\r\n    window.open(url, 'winFactPdf', 'height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no')\r\n\r\n  openPdfDocument = (pdf: string) => {\r\n    const pdfWindow = window.open('', 'winFactPdf', 'height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no');\r\n    try {\r\n      pdfWindow.document.write(\r\n        '<iframe width=\"100%\" style=\"margin: -8px;border: none;\" height=\"100%\" src=\"data:application/pdf;base64, ' +\r\n        encodeURI(pdf) +\r\n        '\"></iframe>');\r\n    } catch(e) {\r\n      this.snackBar.open('No se pudo abrir la ventana emergente para ver la representacin grfica. Revise la configuracin de su explorador, por favor.', 'PDF', { duration: 7000 });\r\n    }\r\n  }\r\n}\r\n","<mat-card class=\"mat-elevation-z4 fullWidth\">\n    <mat-card-title>\n        <h4 *ngIf=\"!!factura.fel_uuid_anulacion\" style=\"background-color: lightcoral;\">*** ANULADA ***</h4>\n        <h4>\n            Factura\n            {{!!factura.factura ? (!!factura.serie_factura ? (factura.serie_factura + ' ' + factura.numero_factura) : 'Pendiente de firmar.') : ''}}\n            <button mat-icon-button type=\"button\" color=\"accent\" (click)=\"showForm = true;\" *ngIf=\"!showForm\">\n                <mat-icon class=\"iconFontSize\">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type=\"button\" color=\"accent\" (click)=\"showForm = false;\" *ngIf=\"showForm\">\n                <mat-icon class=\"iconFontSize\">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmFactura=\"ngForm\" *ngIf=\"showForm\" (ngSubmit)=\"frmFactura.form.valid && onSubmit()\" novalidate>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <mat-label>Serie</mat-label>\n                    <mat-select name=\"factura_serie\" [(ngModel)]=\"factura.factura_serie\" required>\n                        <mat-option *ngFor=\"let fs of facturaSeries\" [value]=\"fs.factura_serie\">\n                            {{fs.serie}} ({{fs.tipo}})\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">                \n                    <mat-label>Cliente</mat-label>\n                    <input type=\"text\" [(ngModel)]=\"clienteSelected\" [ngModelOptions]=\"{standalone: true}\" placeholder=\"Cliente\" matInput [matAutocomplete]=\"auto\" (keyup)=\"filtrar(clienteSelected)\" required>\n                    <mat-autocomplete #auto=\"matAutocomplete\" [displayWith]=\"displayCliente\">\n                        <mat-option *ngFor=\"let cli of filteredClientes\" [value]=\"cli\">\n                            {{cli.nombre}} ({{cli.nit}})\n                        </mat-option>\n                    </mat-autocomplete>                    \n                    <!--<mat-select name=\"cliente\" [(ngModel)]=\"factura.cliente\" required>\n                        <mat-option *ngFor=\"let cli of clientes\" [value]=\"cli.cliente\">\n                            {{cli.nombre}} ({{cli.nit}})\n                        </mat-option>\n                    </mat-select>-->\n                </mat-form-field>                \n            </div>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <input matInput type=\"date\" placeholder=\"Fecha\" name=\"fecha_factura\"\n                        [(ngModel)]=\"factura.fecha_factura\" required>\n                </mat-form-field>\n            </div>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <mat-label>Moneda</mat-label>\n                    <mat-select name=\"moneda\" [(ngModel)]=\"factura.moneda\" required>\n                        <mat-option *ngFor=\"let mon of monedas\" [value]=\"mon.moneda\">\n                            {{mon.nombre}} ({{mon.simbolo}})\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n            <div class=\"form-group\">\n                <mat-checkbox name=\"exenta\" class=\"fullWidth\" [(ngModel)]=\"+factura.exenta\">Exenta</mat-checkbox>\n            </div>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <input matInput *ngIf=\"!esMovil\" [matKeyboard]=\"keyboardLayout\" type=\"text\" placeholder=\"Notas\" name=\"notas\" [(ngModel)]=\"factura.notas\">\n                    <input matInput *ngIf=\"esMovil\" type=\"text\" placeholder=\"Notas\" name=\"notas\" [(ngModel)]=\"factura.notas\">\n                </mat-form-field>                \n            </div>\n            <div align=\"end\">\n                <button mat-raised-button type=\"submit\" color=\"accent\" class=\"btnAccion\"\n                    [disabled]=\"!frmFactura.form.valid || !!factura.fel_uuid || !!factura.fel_uuid_anulacion || !factura.cliente\">\n                    Guardar\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" class=\"btnAccion\"\n                    [disabled]=\"!frmFactura.form.valid || !!factura.fel_uuid || !!factura.fel_uuid_anulacion || detallesFactura.length === 0 || refacturacion\"\n                    (click)=\"firmarFactura()\">\n                    Firmar\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" class=\"btnAccion\"\n                    [disabled]=\"!frmFactura.form.valid || factura.fel_uuid == undefined || factura.fel_uuid == null || !!factura.fel_uuid_anulacion || detallesFactura.length === 0 || refacturacion\"\n                    (click)=\"imprimirFactura()\">\n                    Imprimir\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" class=\"btnAccion\"\n                    [disabled]=\"!frmFactura.form.valid || factura.fel_uuid == undefined || factura.fel_uuid == null || detallesFactura.length === 0 || refacturacion\"\n                    (click)=\"representacionGrafica()\">\n                    PDF\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" class=\"btnAccion\"\n                    [disabled]=\"!frmFactura.form.valid || factura.fel_uuid == undefined || factura.fel_uuid == null || !!factura.fel_uuid_anulacion || detallesFactura.length === 0\"\n                    (click)=\"anularFactura()\">\n                    Anular\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" class=\"btnAccion\"\n                    *ngIf=\"!!factura.fel_uuid_anulacion\" (click)=\"refacturar()\">\n                    Refacturar\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" (click)=\"resetFactura()\" *ngIf=\"factura.factura\">\n                    Nueva\n                </button>\n\n            </div>\n        </form>\n    </mat-card-content>\n</mat-card>\n<hr *ngIf=\"factura.factura\" />\n<mat-card class=\"mat-elevation-z4 fullWidth\" *ngIf=\"factura.factura\">\n    <mat-card-title>\n        <h4>\n            Detalle de factura No.\n            {{(!!factura.serie_factura ? (factura.serie_factura + ' ' + factura.numero_factura) : 'Pendiente de firmar.')}}\n            <button mat-icon-button type=\"button\" color=\"accent\" (click)=\"showFormDetalle = true;\"\n                *ngIf=\"!showFormDetalle\">\n                <mat-icon class=\"iconFontSize\">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type=\"button\" color=\"accent\" (click)=\"showFormDetalle = false;\"\n                *ngIf=\"showFormDetalle\">\n                <mat-icon class=\"iconFontSize\">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmDetalleFactura=\"ngForm\" *ngIf=\"showFormDetalle\"\n            (ngSubmit)=\"frmDetalleFactura.form.valid && onSubmitDetail()\" novalidate>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <mat-label>Artculo</mat-label>                    \n                    <input type=\"text\" [(ngModel)]=\"txtArticuloSelected\" [ngModelOptions]=\"{standalone: true}\" placeholder=\"Artculo\" matInput [matAutocomplete]=\"autoArticulos\" (keyup)=\"filtrarArticulos(txtArticuloSelected)\" required>\n                    <mat-autocomplete #autoArticulos=\"matAutocomplete\" [displayWith]=\"displayArticulo\" (optionSelected)=\"setPrecioUnitario($event)\">\n                        <mat-option *ngFor=\"let a of filteredArticulos\" [value]=\"a\">\n                            {{a.descripcion}}\n                        </mat-option>\n                    </mat-autocomplete>\n                </mat-form-field>\n            </div>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <input matInput placeholder=\"Cantidad\" name=\"cantidad\" type=\"number\" step=\"0.01\" [(ngModel)]=\"detalleFactura.cantidad\"\n                        (change)=\"detalleFactura.total = +detalleFactura.precio_unitario * +detalleFactura.cantidad\"\n                        required>\n                </mat-form-field>                \n            </div>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <input matInput placeholder=\"Precio unitario\" name=\"precio_unitario\" type=\"number\" step=\"0.01\"\n                        [(ngModel)]=\"detalleFactura.precio_unitario\"\n                        (change)=\"detalleFactura.total = +detalleFactura.precio_unitario * +detalleFactura.cantidad\"\n                        required>\n                </mat-form-field>                \n            </div>\n            <div align=\"end\">\n                <button mat-raised-button type=\"submit\" color=\"accent\" class=\"btnAccion\"\n                    [disabled]=\"!frmDetalleFactura.form.valid || !!factura.fel_uuid || !!factura.fel_uuid_anulacion\">\n                    Guardar\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" (click)=\"resetDetalleFactura()\"\n                    *ngIf=\"detalleFactura.detalle_factura\">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n        <hr *ngIf=\"detallesFactura.length > 0\" />\n        <table mat-table [dataSource]=\"dataSource\" class=\"mat-elevation-z4 full-width\"\n            *ngIf=\"detallesFactura.length > 0\">\n            <ng-container matColumnDef=\"articulo\">\n                <th mat-header-cell *matHeaderCellDef>Artculo</th>\n                <td mat-cell *matCellDef=\"let element\" class=\"text-wrap\">{{element.articulo.descripcion}}</td>\n            </ng-container>\n            <ng-container matColumnDef=\"cantidad\">\n                <th mat-header-cell *matHeaderCellDef class=\"text-right\">Cantidad</th>\n                <td mat-cell *matCellDef=\"let element\" class=\"text-right\">{{element.cantidad | number:'1.2-2'}}</td>\n            </ng-container>\n            <ng-container matColumnDef=\"precio_unitario\">\n                <th mat-header-cell *matHeaderCellDef class=\"text-right\">Precio Unitario</th>\n                <td mat-cell *matCellDef=\"let element\" class=\"text-right\">{{element.precio_unitario | number:'1.2-2'}}\n                </td>\n            </ng-container>\n            <ng-container matColumnDef=\"total\">\n                <th mat-header-cell *matHeaderCellDef class=\"text-right\">Total</th>\n                <td mat-cell *matCellDef=\"let element\" class=\"text-right\">{{element.total | number:'1.2-2'}}</td>\n            </ng-container>\n            <ng-container matColumnDef=\"editItem\">\n                <th mat-header-cell *matHeaderCellDef>&nbsp;</th>\n                <td mat-cell *matCellDef=\"let element\" class=\"text-wrap\">\n                    <button mat-raised-button type=\"button\" color=\"accent\"\n                        (click)=\"getDetalleFactura(element.factura, element.detalle_factura)\"\n                        [disabled]=\"!!factura.fel_uuid || !!factura.fel_uuid_anulacion || refacturacion\">\n                        Editar\n                    </button>\n                </td>\n            </ng-container>\n            <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n            <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\">\n            </tr>\n        </table>\n    </mat-card-content>\n</mat-card>","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { GLOBAL } from '../../shared/global';\nimport { ServiceErrorHandler } from '../../shared/error-handler';\nimport { Cobro } from '../interfaces/cobro';\nimport { Observable } from 'rxjs';\nimport { retry, catchError } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CobroService {\n\n  private srvcErrHndl: ServiceErrorHandler;\n  private moduleUrl = 'cuenta';\n\n  constructor(\n    private http: HttpClient\n  ) {\n    this.srvcErrHndl = new ServiceErrorHandler();\n  }\n\n  save(entidad: Cobro): Observable<any> {\n    return this.http.post<any>(\n      `${GLOBAL.urlAppRestaurante}/${this.moduleUrl}/cobrar/${entidad.cuenta}`,\n      entidad\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n}\n","import { Component, OnInit, Inject, Input, OnDestroy } from '@angular/core';\r\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { MatSelectChange } from '@angular/material/select';\r\nimport { GLOBAL } from '../../../shared/global';\r\nimport { LocalstorageService } from '../../../admin/services/localstorage.service';\r\nimport * as moment from 'moment';\r\nimport { ConfirmDialogModel, ConfirmDialogComponent } from '../../../shared/components/confirm-dialog/confirm-dialog.component';\r\nimport { ConfigCheckPasswordModel, CheckPasswordComponent } from '../../../shared/components/check-password/check-password.component';\r\nimport { Socket } from 'ngx-socket-io';\r\n\r\nimport { FormaPago } from '../../interfaces/forma-pago';\r\nimport { Cobro } from '../../interfaces/cobro';\r\nimport { FormaPagoService } from '../../services/forma-pago.service';\r\nimport { CobroService } from '../../services/cobro.service';\r\nimport { Cliente } from '../../../admin/interfaces/cliente';\r\nimport { FacturaRequest } from '../../interfaces/factura';\r\nimport { FacturaService } from '../../services/factura.service';\r\nimport { Sede } from '../../../admin/interfaces/sede';\r\nimport { SedeService } from '../../../admin/services/sede.service';\r\nimport { ComandaService } from '../../../restaurante/services/comanda.service';\r\nimport { ConfiguracionService } from '../../../admin/services/configuracion.service';\r\nimport { Base64 } from 'js-base64';\r\nimport { Subscription } from 'rxjs';\r\n\r\ninterface DatosPedido {\r\n  sede: number;\r\n  direccion_entrega: string;\r\n  telefono: string;\r\n  nombre: string;\r\n  cliente?: any;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-cobrar-pedido',\r\n  templateUrl: './cobrar-pedido.component.html',\r\n  styleUrls: ['./cobrar-pedido.component.css']\r\n})\r\nexport class CobrarPedidoComponent implements OnInit, OnDestroy {\r\n\r\n  @Input() inputData: any = {};\r\n  public lstFormasPago: FormaPago[] = [];\r\n  public formaPago: any = {};\r\n  public formasPagoDeCuenta: any[] = [];\r\n  public factReq: FacturaRequest;\r\n  public clienteSelected: Cliente;\r\n  public esMovil = false;\r\n  public keyboardLayout: string;\r\n  public facturando = false;\r\n  public cargandoConf: any = { w: 75, h: 75 };\r\n  public pideDocumento = false;\r\n  public sedes: Sede[] = [];\r\n  public sede: Sede;\r\n  public datosPedido: DatosPedido = { sede: null, direccion_entrega: null, telefono: null, nombre: null, cliente: null };\r\n\r\n  private endSubs = new Subscription();\r\n\r\n  constructor(\r\n    public dialog: MatDialog,\r\n    public dialogRef: MatDialogRef<CobrarPedidoComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    private snackBar: MatSnackBar,\r\n    public formaPagoSrvc: FormaPagoService,\r\n    public cobroSrvc: CobroService,\r\n    public facturaSrvc: FacturaService,\r\n    private ls: LocalstorageService,\r\n    private socket: Socket,\r\n    private sedeSrvc: SedeService,\r\n    private comandaSrvc: ComandaService,\r\n    private configSrvc: ConfiguracionService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.esMovil = this.ls.get(GLOBAL.usrTokenVar).enmovil || false;\r\n    this.keyboardLayout = GLOBAL.IDIOMA_TECLADO;\r\n    this.resetFactReq();\r\n    this.processData();\r\n    this.loadFormasPago();\r\n    if (!!this.ls.get(GLOBAL.usrTokenVar).sede_uuid) {\r\n      this.socket.emit('joinRestaurant', this.ls.get(GLOBAL.usrTokenVar).sede_uuid);\r\n      this.socket.on('reconnect', () => this.socket.emit('joinRestaurant', this.ls.get(GLOBAL.usrTokenVar).sede_uuid));\r\n    }\r\n    this.loadSedes();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.endSubs.unsubscribe();\r\n  }\r\n\r\n  resetFactReq = () => {\r\n    this.factReq = { cuentas: [], factura_serie: 1, cliente: null, fecha_factura: moment().format(GLOBAL.dbDateFormat), moneda: 1 };\r\n  }\r\n\r\n  processData = () => {\r\n    if (this.data) {\r\n      this.inputData = this.data;\r\n    } else {\r\n      this.data = this.inputData;\r\n    }\r\n\r\n    // console.log('MESA = ', this.data.mesaenuso);\r\n\r\n    this.inputData.totalDeCuenta = 0.00;\r\n    this.inputData.productosACobrar.forEach((item: any) => {\r\n      this.inputData.totalDeCuenta += (item.precio * item.cantidad) + (item.monto_extra);\r\n    });\r\n\r\n    this.calculaPropina();\r\n    this.actualizaSaldo();\r\n    this.formaPago.monto = parseFloat(this.inputData.saldo).toFixed(2);\r\n    // console.log('INPUT DATA = ', this.inputData);\r\n    if (this.inputData.clientePedido) {\r\n      this.setClienteFacturar(this.inputData.clientePedido);\r\n    }\r\n  }\r\n\r\n  loadSedes = () => {\r\n    this.endSubs.add(      \r\n      this.sedeSrvc.get().subscribe(res => {\r\n        if (res) {\r\n          this.sedes = res;\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  calculaPropina = () => {\r\n    this.inputData.montoPropina = parseFloat((this.inputData.porcentajePropina * this.inputData.totalDeCuenta / 100).toFixed(2));\r\n    this.actualizaSaldo();\r\n  }\r\n\r\n  calculaPorcentajePropina() {\r\n    this.inputData.porcentajePropina = parseFloat((this.inputData.montoPropina * 100 / this.inputData.totalDeCuenta).toFixed(2));\r\n    this.actualizaSaldo();\r\n  }\r\n\r\n  loadFormasPago = () => {\r\n    this.endSubs.add(      \r\n      this.formaPagoSrvc.get({ activo: 1 }).subscribe((res: any) => {\r\n        if (!!res && res.length > 0) {\r\n          this.lstFormasPago = res;\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  addFormaPago = () => {\r\n    const fp = this.lstFormasPago.filter(f => +f.forma_pago === +this.formaPago.forma_pago)[0];\r\n    if (+fp.pedirautorizacion === 1) {\r\n      const vpgtRef = this.dialog.open(CheckPasswordComponent, {\r\n        width: '40%',\r\n        disableClose: true,\r\n        data: new ConfigCheckPasswordModel(1)\r\n      });\r\n\r\n      this.endSubs.add(        \r\n        vpgtRef.afterClosed().subscribe(res => {\r\n          if (res) {\r\n            this.agregaFormaPago(fp);\r\n          } else {\r\n            this.snackBar.open('La contrasea no es correcta', 'Formas de pago', { duration: 5000 });\r\n          }\r\n        })\r\n      );\r\n    } else {\r\n      this.agregaFormaPago(fp);\r\n    }\r\n  }\r\n\r\n  agregaFormaPago = (fp: FormaPago) => {\r\n    this.formasPagoDeCuenta.push({\r\n      forma_pago: fp,\r\n      monto: parseFloat(this.formaPago.monto).toFixed(2),\r\n      propina: (this.formaPago.propina || 0.00),\r\n      documento: (this.formaPago.documento || null),\r\n      comision_monto: +this.formaPago.monto * +fp.comision_porcentaje / 100\r\n    });\r\n    this.actualizaSaldo();\r\n    this.pideDocumento = false;\r\n  }\r\n\r\n  delFormaPago = (idx: number) => {\r\n    this.formasPagoDeCuenta.splice(idx, 1);\r\n    this.actualizaSaldo();\r\n  }\r\n\r\n  actualizaSaldo = () => {\r\n    let sumFormasPago = 0.00;\r\n    this.formasPagoDeCuenta.forEach(fp => sumFormasPago += +fp.monto);\r\n    // this.inputData.saldo = this.inputData.totalDeCuenta + this.inputData.montoPropina - sumFormasPago;\r\n    this.inputData.saldo = (+this.inputData.totalDeCuenta - sumFormasPago).toFixed(2);\r\n    this.formaPago = { monto: this.inputData.saldo };\r\n  }\r\n\r\n  cancelar = () => this.dialogRef.close();\r\n\r\n  setClienteFacturar = (obj: Cliente) => {\r\n    this.clienteSelected = obj;\r\n    this.factReq.cliente = +obj.cliente;\r\n    if (+this.data.mesaenuso.mesa.escallcenter === 1) {\r\n      this.datosPedido.nombre = obj.nombre;\r\n      this.datosPedido.direccion_entrega = obj.direccion;\r\n      this.datosPedido.telefono = obj.telefono;\r\n    }\r\n  }\r\n\r\n  cobrar = () => {\r\n    this.facturando = true;\r\n    const objCobro: Cobro = {\r\n      cuenta: this.inputData.idcuenta,\r\n      forma_pago: [],\r\n      total: this.inputData.totalDeCuenta + this.inputData.montoPropina,\r\n      propina_monto: this.inputData.montoPropina,\r\n      propina_porcentaje: this.inputData.porcentajePropina,\r\n      comision_monto: 0.00\r\n    };\r\n\r\n    let sumaMontoComision = 0.00;\r\n\r\n    for (const fp of this.formasPagoDeCuenta) {\r\n      sumaMontoComision += (fp.comision_monto || 0);\r\n      objCobro.forma_pago.push({\r\n        forma_pago: +fp.forma_pago.forma_pago,\r\n        monto: +fp.monto + +fp.comision_monto,\r\n        propina: (fp.propina || 0.00),\r\n        documento: fp.documento,\r\n        comision_monto: fp.comision_monto\r\n      });\r\n    }\r\n    objCobro.comision_monto = sumaMontoComision;\r\n    objCobro.total += sumaMontoComision;\r\n\r\n    if (+this.data.mesaenuso.mesa.escallcenter === 1) {\r\n      this.enviarPedido(objCobro);\r\n      return;\r\n    }\r\n\r\n    this.factReq.cuentas.push({ cuenta: +this.inputData.idcuenta });\r\n    this.endSubs.add(      \r\n      this.cobroSrvc.save(objCobro).subscribe(res => {\r\n        if (res.exito && !res.facturada) {\r\n          this.snackBar.open('Cobro', `${res.mensaje}`, { duration: 3000 });\r\n          if (res.facturar) {\r\n            this.endSubs.add(\r\n              this.facturaSrvc.facturar(this.factReq).subscribe(resFact => {\r\n                // console.log('RESPUESTA DE FACTURAR = ', resFact);\r\n                if (resFact.exito) {\r\n                  const confirmRef = this.dialog.open(ConfirmDialogComponent, {\r\n                    maxWidth: '400px',\r\n                    data: new ConfirmDialogModel('Imprimir factura', 'Desea imprimir la factura?', 'S', 'No')\r\n                  });\r\n    \r\n                  this.endSubs.add(                \r\n                    confirmRef.afterClosed().subscribe((confirma: boolean) => {\r\n                      if (confirma) {\r\n                        this.printFactura(resFact.factura);\r\n                      }\r\n                      this.resetFactReq();\r\n                      this.snackBar.open('Factura', `${resFact.mensaje}`, { duration: 3000 });\r\n                      this.facturando = false;\r\n                      this.dialogRef.close(res.cuenta);\r\n                      this.socket.emit('refrescar:mesa', { mesaenuso: this.data.mesaenuso });\r\n                    })\r\n                  );\r\n                } else {\r\n                  this.facturando = false;\r\n                  this.snackBar.open('Factura', `ERROR: ${res.mensaje}`, { duration: 7000 });\r\n                  this.socket.emit('refrescar:mesa', { mesaenuso: this.data.mesaenuso });\r\n                  this.dialogRef.close(res.cuenta);\r\n                }\r\n              })\r\n            );\r\n          } else {\r\n            this.socket.emit('refrescar:mesa', { mesaenuso: this.data.mesaenuso });\r\n            this.dialogRef.close(res.cuenta);\r\n          }\r\n        } else {\r\n          this.facturando = false;\r\n          this.snackBar.open('Cobro', `ERROR: ${res.mensaje}`, { duration: 7000 });\r\n          this.socket.emit('refrescar:mesa', { mesaenuso: this.data.mesaenuso });\r\n          this.dialogRef.close('closePanel');\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  enviarPedido = (cobro: Cobro) => {\r\n\r\n    this.datosPedido.cliente = {\r\n      nombre: this.clienteSelected.nombre,\r\n      apellidos: '',\r\n      correo: this.clienteSelected.correo,\r\n      telefono: this.datosPedido.telefono,\r\n      nit: this.clienteSelected.nit,\r\n      direccion: this.datosPedido.direccion_entrega\r\n    };\r\n\r\n    const obj = {\r\n      cobro,\r\n      pedido: this.datosPedido,\r\n      factura: {\r\n        cuentas: [\r\n          {\r\n            cuenta: cobro.cuenta\r\n          }\r\n        ],\r\n        factura_serie: 1,\r\n        cliente: this.clienteSelected.cliente,\r\n        fecha_factura: moment().format(GLOBAL.dbDateFormat),\r\n        moneda: 1\r\n      }\r\n    };\r\n\r\n    // console.log('PEDIDO = ', obj);\r\n    this.endSubs.add(      \r\n      this.comandaSrvc.enviarPedido(+this.data.mesaenuso.comanda, obj).subscribe(res => {\r\n        if (res.exito) {\r\n          this.snackBar.open('Pedido', `#${res.pedido}. ${res.mensaje}`, { duration: 3000 });\r\n          this.dialogRef.close('closePanel');\r\n        } else {\r\n          this.snackBar.open('Pedido', `ERROR: ${res.mensaje}`, { duration: 7000 });\r\n        }\r\n        this.facturando = false;\r\n        this.socket.emit('refrescar:mesa', { mesaenuso: this.data.mesaenuso });\r\n      })\r\n    );\r\n  }\r\n\r\n  procesaDetalleFactura = (detalle: any[]) => {\r\n    const detFact: any[] = [];\r\n    detalle.forEach(d => detFact.push({\r\n      Cantidad: parseInt(d.cantidad),\r\n      Descripcion: d.articulo.descripcion,\r\n      Total: +d.total,\r\n      PrecioUnitario: +d.precio_unitario\r\n    }));\r\n    return detFact;\r\n  }\r\n\r\n  getTotalDetalle = (detalle: any[]): number => {\r\n    let suma = 0.00;\r\n    detalle.forEach(d => suma += +d.total);\r\n    return suma;\r\n  }\r\n\r\n  getTotalImpuestosAdicionales = (impuestos: any[]) => {\r\n    let suma = 0.00;\r\n    impuestos.forEach(i => suma += +i.total);\r\n    return suma;\r\n  }\r\n\r\n  printFactura = (factura: any) => {\r\n    // console.log('FACTURA = ', factura);\r\n    this.endSubs.add(      \r\n      this.facturaSrvc.imprimir(+factura.factura).subscribe(res => {\r\n        if (res.factura) {\r\n  \r\n          const msgToPrint = {\r\n            NombreEmpresa: res.factura.empresa.nombre,\r\n            NitEmpresa: res.factura.empresa.nit,\r\n            SedeEmpresa: res.factura.sedeFactura.nombre,\r\n            DireccionEmpresa: res.factura.empresa.direccion,\r\n            Fecha: moment(res.factura.fecha_factura).format(GLOBAL.dateFormat),\r\n            Nit: res.factura.receptor.nit,\r\n            Nombre: res.factura.receptor.nombre,\r\n            Direccion: res.factura.receptor.direccion,\r\n            Serie: res.factura.serie_factura,\r\n            Numero: res.factura.numero_factura,\r\n            Total: this.getTotalDetalle(res.factura.detalle) + this.getTotalImpuestosAdicionales((res.factura.impuestos_adicionales || [])),\r\n            NoAutorizacion: res.factura.fel_uuid,\r\n            NombreCertificador: res.factura.certificador_fel.nombre,\r\n            NitCertificador: res.factura.certificador_fel.nit,\r\n            FechaDeAutorizacion: res.factura.fecha_autorizacion,\r\n            NoOrdenEnLinea: '',\r\n            FormaDePago: '',\r\n            DetalleFactura: this.procesaDetalleFactura(res.factura.detalle),\r\n            Impresora: this.data.impresora,\r\n            ImpuestosAdicionales: (res.factura.impuestos_adicionales || [])\r\n          };\r\n  \r\n          if (!!this.data.impresora) {\r\n            if (+this.data.impresora.bluetooth === 0) {\r\n              this.socket.emit(`print:factura`, `${JSON.stringify(msgToPrint)}`);\r\n            } else {\r\n              msgToPrint.Fecha = moment(res.factura.fecha_factura).format(GLOBAL.dateFormatBT);\r\n              this.printToBT(JSON.stringify(msgToPrint));\r\n            }\r\n          } else {\r\n            this.socket.emit(`print:factura`, `${JSON.stringify(msgToPrint)}`);\r\n          }\r\n  \r\n          this.snackBar.open(\r\n            `Imprimiendo factura ${res.factura.serie_factura}-${res.factura.numero_factura}`,\r\n            'Impresin', { duration: 3000 }\r\n          );\r\n        } else {\r\n          this.snackBar.open(`ERROR: ${res.mensaje}`, 'Impresin', { duration: 7000 });\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  printToBT = (msgToPrint: string = '') => {\r\n    const convertir = this.configSrvc.getConfig(GLOBAL.CONSTANTES.RT_ENVIA_COMO_BASE64);    \r\n    const data = convertir ? Base64.encode(msgToPrint, true) : msgToPrint;\r\n    // const AppHref = `${GLOBAL.DEEP_LINK_ANDROID}${data}`;\r\n    const AppHref = GLOBAL.DEEP_LINK_ANDROID.replace('__INFOBASE64__', data);\r\n    try {\r\n      window.location.href = AppHref; \r\n    } catch(error) {\r\n      this.snackBar.open('No se pudo conectar con la aplicacin de impresin', 'Comanda', { duration: 3000 });\r\n    }\r\n  }\r\n\r\n  onSelectionChangeFP = (msc: MatSelectChange) => {\r\n    const idx = this.lstFormasPago.findIndex(lfp => +lfp.forma_pago === +msc.value);\r\n    if (idx > -1) {\r\n      this.pideDocumento = +this.lstFormasPago[idx].pedirdocumento === 1;\r\n    }\r\n  }\r\n\r\n\r\n}\r\n","<h1 mat-dialog-title>\n  Cobrar cuenta de {{data.cuenta}}\n  <small *ngIf=\"clienteSelected && !!clienteSelected.cliente\">\n    - Factura a nombre de {{clienteSelected.nombre}}\n  </small>\n</h1>\n<div mat-dialog-content style=\"height: 650px;\">\n  <div class=\"row\">\n    <div class=\"col m5 s12 mat-elevation-z4 colHeight\" style=\"overflow-y: auto;\">\n      <app-lista-cliente #lstClientes (getClienteEv)=\"setClienteFacturar($event)\" [showAddButton]=\"true\">\n      </app-lista-cliente>\n    </div>\n    <div class=\"col m3 s12 mat-elevation-z4 colHeight\" style=\"overflow-y: auto;\">\n      <table class=\"table table-sm table-borderless table-striped\">\n        <tbody>\n          <tr *ngFor=\"let p of inputData.productosACobrar; let i = index;\">\n            <td>{{p.cantidad}}&nbsp;{{p.nombre || p.articulo.descripcion}}</td>\n            <td class=\"text-right\">{{((p.cantidad * p.precio) + (p.monto_extra)) | number: '1.2-2'}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class=\"col m4 s12 mat-elevation-z4 colHeight\" style=\"overflow-y: auto;\">\n      <form #frmFormasPago=\"ngForm\" novalidate>\n        <mat-form-field class=\"fullWidth\">\n          <mat-label>Forma de pago</mat-label>\n          <mat-select name=\"forma_pago\" [(ngModel)]=\"formaPago.forma_pago\" cdkFocusInitial\n            (selectionChange)=\"onSelectionChangeFP($event)\" required>\n            <mat-option *ngFor=\"let fp of lstFormasPago\" [value]=\"fp.forma_pago\">\n              {{fp.descripcion}}\n            </mat-option>\n          </mat-select>\n        </mat-form-field>\n        <!--Inicia input de monto por forma de pago-->\n        <mat-form-field class=\"fullWidth\">\n          <input matInput *ngIf=\"!esMovil\" [matKeyboard]=\"keyboardLayout\" placeholder=\"monto\" name=\"monto\" [(ngModel)]=\"formaPago.monto\" required>\n          <input matInput *ngIf=\"esMovil\" placeholder=\"monto\" name=\"monto\" [(ngModel)]=\"formaPago.monto\" required>\n        </mat-form-field>\n        <!--Fin de input de monto por forma de pago-->\n        <!--Inicia input de propina por forma de pago-->\n        <mat-form-field class=\"fullWidth\">\n          <input matInput *ngIf=\"!esMovil\" [matKeyboard]=\"keyboardLayout\" placeholder=\"Propina\" name=\"propina\" [(ngModel)]=\"formaPago.propina\">\n          <input matInput *ngIf=\"esMovil\" placeholder=\"Propina\" name=\"propina\" [(ngModel)]=\"formaPago.propina\">\n        </mat-form-field>\n        <!--Fin de input de propina por forma de pago-->\n        <!-- Inicia input de documento -->\n        <mat-form-field class=\"fullWidth\" *ngIf=\"pideDocumento\">\n          <input matInput *ngIf=\"!esMovil\" [matKeyboard]=\"keyboardLayout\" placeholder=\"Documento\" name=\"documento\" [(ngModel)]=\"formaPago.documento\" [required]=\"pideDocumento\">\n          <input matInput *ngIf=\"esMovil\" placeholder=\"Documento\" name=\"documento\" [(ngModel)]=\"formaPago.documento\" [required]=\"pideDocumento\">\n        </mat-form-field>\n        <!-- Fin de input de documento -->\n        <div align=\"end\">\n          <button mat-raised-button type=\"button\" color=\"accent\" (click)=\"addFormaPago()\"\n            [disabled]=\"!frmFormasPago.form.valid || inputData.saldo <= 0\">\n            Agregar\n          </button>\n        </div>\n      </form>\n      <hr />\n      <table class=\"table table-sm\">\n        <thead>\n          <tr>\n            <th class=\"text-left\">FP</th>\n            <th class=\"text-right\">Mon</th>\n            <th class=\"text-right\">Prop</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let fpCta of formasPagoDeCuenta; let i = index\">\n            <td>{{fpCta.forma_pago.descripcion}}</td>\n            <td class=\"text-right\">{{fpCta.monto | number:'1.2-2'}}</td>\n            <td class=\"text-right\">{{fpCta.propina | number:'1.2-2'}}</td>\n            <td class=\"text-center\">\n              <button mat-icon-button type=\"button\" color=\"warn\" (click)=\"delFormaPago(i)\">\n                <mat-icon>delete_forever</mat-icon>\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col m8 s8\">\n      <table class=\"table table-sm table-borderless\" *ngIf=\"+data.mesaenuso.mesa.escallcenter === 1\">\n        <caption>\n          <strong>Datos de envo</strong>\n        </caption>\n        <tbody>\n          <tr>\n            <!--<td class=\"text-right font-weight-bold\">Atiende:</td>-->\n            <td>\n              <mat-form-field class=\"fullWidth\">\n                <mat-label>Atiende:</mat-label>\n                <mat-select name=\"sede\" [(ngModel)]=\"datosPedido.sede\" required>\n                  <mat-option *ngFor=\"let s of sedes\" [value]=\"s.sede\">\n                    {{s.nombre}}\n                  </mat-option>\n                </mat-select>\n              </mat-form-field>\n            </td>\n            <!--<td class=\"text-right font-weight-bold\">Entrega:</td>-->\n            <td>\n              <mat-form-field class=\"fullWidth\">\n                <input matInput type=\"text\" placeholder=\"Direccin de entrega\" name=\"direccion_entrega\"\n                  [(ngModel)]=\"datosPedido.direccion_entrega\" maxlength=\"1000\" required>\n              </mat-form-field>\n            </td>\n          </tr>\n          <tr>\n            <!--<td class=\"text-right font-weight-bold\">Nombre:</td>-->\n            <td>\n              <mat-form-field class=\"fullWidth\">\n                <input matInput type=\"text\" placeholder=\"Nombre\" name=\"nombre\" [(ngModel)]=\"datosPedido.nombre\" maxlength=\"1000\">\n              </mat-form-field>\n            </td>\n            <!--<td class=\"text-right font-weight-bold\">Telfono:</td>-->\n            <td>\n              <mat-form-field class=\"fullWidth\">\n                <input matInput type=\"text\" placeholder=\"Telfono\" name=\"telefono\" [(ngModel)]=\"datosPedido.telefono\" maxlength=\"1000\">\n              </mat-form-field>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class=\"col m4 s4\">\n      <table class=\"table table-sm table-borderless\">\n        <tbody>\n          <tr>\n            <td class=\"text-right font-weight-bold\">TOTAL DE CUENTA:</td>\n            <td class=\"text-right font-weight-bold totalCuenta\" style=\"max-width: 15%;\">{{inputData.totalDeCuenta |\n              number:'1.2-2'}}</td>\n          </tr>\n          <tr>\n            <td class=\"text-right font-weight-bold\">PENDIENTE:</td>\n            <td class=\"text-right font-weight-bold\" style=\"max-width: 15%;\">\n              <span\n                [ngClass]=\"{'saldo-pendiente': +inputData.saldo > 0, 'saldo-exacto': +inputData.saldo == 0, 'saldo-extra': +inputData.saldo < 0 }\">{{inputData.saldo\n                | number:'1.2-2'}}</span>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n<div mat-dialog-actions align=\"end\">\n  <app-cargando *ngIf=\"facturando\" [configuracion]=\"cargandoConf\"></app-cargando>\n  <button mat-raised-button color=\"accent\" (click)=\"cancelar()\" [disabled]=\"facturando\">Cancelar</button>\n  <button mat-raised-button color=\"accent\" (click)=\"cobrar()\" *ngIf=\"+data.mesaenuso.mesa.escallcenter === 0\"\n    [disabled]=\"formasPagoDeCuenta.length == 0 || +inputData.saldo > 0 || !factReq.cliente || facturando\">Facturar</button>\n  <button mat-raised-button color=\"accent\" (click)=\"cobrar()\" *ngIf=\"+data.mesaenuso.mesa.escallcenter === 1\"\n    [disabled]=\"formasPagoDeCuenta.length == 0 || +inputData.saldo > 0 || !factReq.cliente || facturando || !this.datosPedido.sede\">\n    Enviar\n  </button>\n</div>","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { GLOBAL } from '../../../../shared/global';\nimport * as moment from 'moment';\nimport { ListaFacturaManualComponent } from '../lista-factura-manual/lista-factura-manual.component';\nimport { FormFacturaManualComponent } from '../form-factura-manual/form-factura-manual.component';\nimport { Factura } from '../../../interfaces/factura';\n\n@Component({\n  selector: 'app-factura-manual',\n  templateUrl: './factura-manual.component.html',\n  styleUrls: ['./factura-manual.component.css']\n})\nexport class FacturaManualComponent implements OnInit {\n\n  public factura: Factura;\n  @ViewChild('lstFacturaManual') lstFacturaComponent: ListaFacturaManualComponent;\n  @ViewChild('frmFacturaManual') frmFactura: FormFacturaManualComponent;\n\n  constructor( ) {\n    this.factura = {\n      factura: null, factura_serie: null, cliente: null, fecha_factura: moment().format(GLOBAL.dbDateFormat), moneda: null, exenta: 0,\n      notas: null\n    };\n  }\n\n  ngOnInit() {\n  }\n\n  setFactura = (fact: any) => { \n    this.factura = {\n      factura: fact.factura,\n      factura_serie: fact.factura_serie.factura_serie,\n      cliente: fact.cliente.cliente,\n      fecha_factura: fact.fecha_factura,\n      moneda: fact.moneda.moneda,\n      exenta: fact.exenta,\n      notas: fact.notas,\n      usuario: fact.usuario.usuario,\n      numero_factura: fact.numero_factura,\n      serie_factura: fact.serie_factura,\n      fel_uuid: fact.fel_uuid,\n      fel_uuid_anulacion: fact.fel_uuid_anulacion,\n      certificador_fel: fact.certificador_fel\n    };\n    this.frmFactura.clienteSelected = fact.cliente;\n    this.frmFactura.loadDetalleFactura(+this.factura.factura);\n    this.frmFactura.resetDetalleFactura();\n  }\n\n  refreshFacturaList = () => this.lstFacturaComponent.loadFacturas();\n\n}\n","<div class=\"row\">\n    <div class=\"col m5 s12\">\n        <app-lista-factura-manual #lstFacturaManual (getFacturaEv)=\"setFactura($event)\"></app-lista-factura-manual>\n    </div>\n    <div class=\"col m7 s12\">\n        <app-form-factura-manual #frmFacturaManual [factura]=\"factura\" (facturaSavedEv)=\"refreshFacturaList()\">\n        </app-form-factura-manual>\n    </div>\n</div>","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { LocalstorageService } from '../../../../admin/services/localstorage.service';\nimport { GLOBAL } from '../../../../shared/global';\n\nimport { FormaPago } from '../../../interfaces/forma-pago';\nimport { FormaPagoService } from '../../../services/forma-pago.service';\n\n@Component({\n  selector: 'app-form-forma-pago',\n  templateUrl: './form-forma-pago.component.html',\n  styleUrls: ['./form-forma-pago.component.css']\n})\nexport class FormFormaPagoComponent implements OnInit {\n\n  @Input() formaPago: FormaPago;\n  @Output() formaPagoSavedEv = new EventEmitter();\n  public keyboardLayout = GLOBAL.IDIOMA_TECLADO;\n  public esMovil = false;\n\n  constructor(\n    private snackBar: MatSnackBar,\n    private formaPagoSrvc: FormaPagoService,\n    private ls: LocalstorageService\n  ) { }\n\n  ngOnInit() {\n    this.esMovil = this.ls.get(GLOBAL.usrTokenVar).enmovil || false;\n  }\n\n  resetFormaPago = () => this.formaPago = { forma_pago: null, descripcion: null, activo: 1 };\n\n  onSubmit = () => {\n    this.formaPagoSrvc.save(this.formaPago).subscribe(res => {\n      // console.log(res);\n      if (res.exito) {\n        this.formaPagoSavedEv.emit();\n        this.resetFormaPago();\n        this.snackBar.open('Forma de pago agregada...', 'Forma de pago', { duration: 3000 });\n      }\n    });\n  }\n\n}\n","<mat-card class=\"mat-elevation-z4 fullWidth\">\n    <mat-card-title>\n        <h4>\n            Forma de pago {{!!formaPago.forma_pago ? formaPago.descripcion : ''}}\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmFormaPago=\"ngForm\" (ngSubmit)=\"frmFormaPago.form.valid && onSubmit()\" novalidate>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <input matInput *ngIf=\"!esMovil\" [matKeyboard]=\"keyboardLayout\" type=\"text\" placeholder=\"Descripcin\" name=\"descripcion\" [(ngModel)]=\"formaPago.descripcion\" required>\n                    <input matInput *ngIf=\"esMovil\" type=\"text\" placeholder=\"Descripcin\" name=\"descripcion\" [(ngModel)]=\"formaPago.descripcion\" required>                    \n                </mat-form-field>                \n            </div>\n            <div class=\"form-group\">\n                <mat-checkbox name=\"activo\" class=\"fullWidth\" [(ngModel)]=\"+formaPago.activo\">Activo</mat-checkbox>\n            </div>\n            <div align=\"end\">\n                <button mat-raised-button type=\"submit\" color=\"accent\" class=\"btnAccion\" [disabled]=\"!frmFormaPago.form.valid\">\n                    Guardar\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" (click)=\"resetFormaPago()\" *ngIf=\"formaPago.forma_pago\">\n                    Nueva\n                </button>\n            </div>\n        </form>\n    </mat-card-content>\n</mat-card>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { FormsModule } from '@angular/forms';\nimport { SharedModule } from '../shared/shared.module';\nimport { AdminModule } from '../admin/admin.module';\n\nimport { MatListModule } from '@angular/material/list';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatPaginatorModule } from '@angular/material/paginator';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\n\nimport { MatKeyboardModule } from 'angular-onscreen-material-keyboard';\nimport { EcoFabSpeedDialModule } from '@ecodev/fab-speed-dial';\n\nimport { PosRoutingModule } from './pos-routing.module';\nimport { CobrarPedidoComponent } from './components/cobrar-pedido/cobrar-pedido.component';\nimport { FormaPagoComponent } from './components/formaPago/forma-pago/forma-pago.component';\nimport { ListaFormaPagoComponent } from './components/formaPago/lista-forma-pago/lista-forma-pago.component';\nimport { FormFormaPagoComponent } from './components/formaPago/form-forma-pago/form-forma-pago.component';\nimport { FacturaManualComponent } from './components/facturaManual/factura-manual/factura-manual.component';\nimport { ListaFacturaManualComponent } from './components/facturaManual/lista-factura-manual/lista-factura-manual.component';\nimport { FormFacturaManualComponent } from './components/facturaManual/form-factura-manual/form-factura-manual.component';\n\n\n@NgModule({\n  declarations: [\n    CobrarPedidoComponent, FormaPagoComponent, ListaFormaPagoComponent, FormFormaPagoComponent, FacturaManualComponent,\n    ListaFacturaManualComponent, FormFacturaManualComponent\n  ],\n  imports: [\n    CommonModule,\n    PosRoutingModule,\n    HttpClientModule,\n    FormsModule,\n    MatKeyboardModule,\n    SharedModule,\n    AdminModule,\n    MatListModule,\n    MatIconModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatCardModule,\n    MatDividerModule,\n    MatTabsModule,\n    MatTableModule,\n    MatSelectModule,\n    MatCheckboxModule,\n    MatButtonModule,\n    MatSnackBarModule,\n    MatToolbarModule,\n    MatMenuModule,\n    MatGridListModule,\n    MatPaginatorModule,\n    MatDialogModule,\n    MatSidenavModule,\n    MatAutocompleteModule,\n    EcoFabSpeedDialModule,\n  ],\n  exports: [CobrarPedidoComponent]\n})\nexport class PosModule { }\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { GLOBAL } from '../../shared/global';\nimport { ServiceErrorHandler } from '../../shared/error-handler';\nimport { FacturaSerie } from '../interfaces/factura-serie';\n// import { LocalstorageService } from '../../admin/services/localstorage.service';\nimport { Observable } from 'rxjs';\nimport { retry, catchError } from 'rxjs/operators';\nimport * as qs from 'qs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FacturaSerieService {\n\n  private srvcErrHndl: ServiceErrorHandler;\n  // private moduleUrl: string = 'turno';\n  // private usrToken: string = null;\n\n  constructor(\n    private http: HttpClient,\n    // private ls: LocalstorageService\n  ) {\n    this.srvcErrHndl = new ServiceErrorHandler();\n    // this.usrToken = this.ls.get(GLOBAL.usrTokenVar) ? this.ls.get(GLOBAL.usrTokenVar).token : null;\n  }\n\n  get(fltr: any = {}): Observable<FacturaSerie[]> {\n    /* const httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': this.usrToken\n      })\n    }; */\n    return this.http.get<FacturaSerie[]>(\n      `${GLOBAL.urlCatalogos}/get_factura_serie?${qs.stringify(fltr)}`\n      // , httpOptions\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n}\n","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\nimport { PageEvent } from '@angular/material/paginator';\nimport { LocalstorageService } from '../../../../admin/services/localstorage.service';\nimport { GLOBAL, PaginarArray, MultiFiltro } from '../../../../shared/global';\n\nimport { Factura } from '../../../interfaces/factura';\nimport { FacturaService } from '../../../services/factura.service';\n\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'app-lista-factura-manual',\n  templateUrl: './lista-factura-manual.component.html',\n  styleUrls: ['./lista-factura-manual.component.css']\n})\nexport class ListaFacturaManualComponent implements OnInit {\n\n  public esMovil = false;\n  public keyboardLayout = GLOBAL.IDIOMA_TECLADO;\n\n  public lstFacturas: Factura[];\n  public lstFacturasPaged: Factura[];\n  @Output() getFacturaEv = new EventEmitter();\n\n  public length = 0;\n  public pageSize = 5;\n  public pageSizeOptions: number[] = [5, 10, 15];\n  public pageIndex = 0;\n  public pageEvent: PageEvent;\n  public txtFiltro = '';\n  public verTodas = false;\n  public rango = { fdel: null, fal: null };\n\n  constructor(\n    private facturaSrvc: FacturaService,\n    private ls: LocalstorageService\n  ) { }\n\n  ngOnInit() {\n    this.esMovil = this.ls.get(GLOBAL.usrTokenVar).enmovil || false;\n    this.rango.fdel = moment().startOf('month').format(GLOBAL.dbDateFormat);\n    this.rango.fal = moment().endOf('month').format(GLOBAL.dbDateFormat);\n    this.loadFacturas();\n  }\n\n  applyFilter() {\n    if (this.txtFiltro.length > 0) {\n      const tmpList = MultiFiltro(this.lstFacturas, this.txtFiltro);\n      this.length = tmpList.length;\n      this.lstFacturasPaged = PaginarArray(tmpList, this.pageSize, this.pageIndex + 1);\n    } else {\n      this.length = this.lstFacturas.length;\n      this.lstFacturasPaged = PaginarArray(this.lstFacturas, this.pageSize, this.pageIndex + 1);\n    }\n  }\n\n  loadFacturas = () => {\n    const fltr: any = {};\n    if (this.verTodas) {\n      fltr._todas = true;\n    }\n\n    if (moment(this.rango.fdel).isValid()) {\n      fltr._fdel = this.rango.fdel\n    }\n\n    if (moment(this.rango.fal).isValid()) {\n      fltr._fal = this.rango.fal\n    }\n\n    this.facturaSrvc.get(fltr).subscribe(lst => {\n      // console.log(lst);\n      if (lst) {\n        if (lst.length > 0) {\n          this.lstFacturas = lst;\n        } else {\n          this.lstFacturas = [];\n        }\n        this.applyFilter();\n      }\n    });\n  }\n\n  cargarFacturas = (obj: any) => this.loadFacturas();\n\n  getFactura = (obj: Factura) => {\n    this.getFacturaEv.emit(obj);\n  }\n\n  pageChange = (e: PageEvent) => {\n    this.pageSize = e.pageSize;\n    this.pageIndex = e.pageIndex;\n    this.applyFilter();\n  }\n\n}\n","<mat-card class=\"mat-elevation-z4 fullWidth\">\n    <mat-card-content>        \n        <mat-form-field class=\"fullWidth\">\n            <input matInput type=\"date\" placeholder=\"Del\" [(ngModel)]=\"rango.fdel\"\n                [ngModelOptions]=\"{standalone: true}\">\n        </mat-form-field>\n        <mat-form-field class=\"fullWidth\">\n            <input matInput type=\"date\" placeholder=\"Al\" [(ngModel)]=\"rango.fal\" [ngModelOptions]=\"{standalone: true}\">\n        </mat-form-field>\n        <mat-checkbox name=\"pedirdocumento\" class=\"btnAccion\" [(ngModel)]=\"verTodas\" [ngModelOptions]=\"{standalone: true}\" (change)=\"cargarFacturas($event)\">Todas</mat-checkbox>\n        <button mat-raised-button type=\"button\" color=\"accent\" (click)=\"loadFacturas()\">\n            Buscar\n        </button>\n        <mat-form-field class=\"fullWidth\">\n            <input matInput *ngIf=\"!esMovil\" [matKeyboard]=\"keyboardLayout\" (input)=\"applyFilter()\"\n                placeholder=\"Filtrar...\" [(ngModel)]=\"txtFiltro\" [ngModelOptions]=\"{standalone: true}\">\n            <input matInput *ngIf=\"esMovil\" (keyup)=\"applyFilter()\" placeholder=\"Filtrar...\" [(ngModel)]=\"txtFiltro\"\n                [ngModelOptions]=\"{standalone: true}\">\n        </mat-form-field>\n        <mat-nav-list>\n            <mat-list-item *ngFor=\"let element of lstFacturasPaged\" (click)=\"getFactura(element)\">\n                <mat-icon mat-list-icon>receipt</mat-icon>\n                <h5 mat-line>{{element.serie_factura}}&nbsp;{{element.numero_factura}}</h5>\n                <span mat-line>Fecha: {{element.fecha_factura | date:'dd/MM/yyyy'}}</span>\n                <span mat-line>Cliente: {{element.cliente.nombre}}</span>\n                <span mat-line>NIT: {{element.cliente.nit}}</span>\n            </mat-list-item>\n        </mat-nav-list>\n        <mat-paginator [length]=\"length\" [pageSize]=\"pageSize\" [pageSizeOptions]=\"pageSizeOptions\"\n            (page)=\"pageChange($event)\" showFirstLastButtons>\n        </mat-paginator>\n    </mat-card-content>\n</mat-card>"]}