<div class="row">
	<div class="col m12 s12">
		<mat-card class="mat-elevation-z4 fullWidth">
			<mat-card-content>
				<form (ngSubmit)="onSubmit()" novalidate>
					<mat-form-field appearance="legacy">
						<mat-label>Del</mat-label>
						<input matInput type="date" placeholder="Del" [(ngModel)]="params.fdel"
							[ngModelOptions]="{standalone: true}" required>
					</mat-form-field>
					<mat-form-field appearance="legacy" style="margin-left: 3px;">
						<mat-label>Al</mat-label>
						<input matInput type="date" placeholder="Al" [(ngModel)]="params.fal"
							[ngModelOptions]="{standalone: true}" required>
					</mat-form-field>
					<mat-form-field appearance="legacy" style="margin-left: 3px;">
						<mat-label>Sede</mat-label>
						<mat-select name="sede" multiple [(ngModel)]="params.sede">
							<mat-option *ngFor="let sede of sedes" [value]="sede.sede.sede">
								{{sede.sede.nombre}}
							</mat-option>
						</mat-select>
					  </mat-form-field>
					  <mat-form-field appearance="legacy" style="margin-left: 3px;" *ngIf="params.sede && params.sede.length > 1">
						  <mat-label>Agrupar por</mat-label>
						  <mat-select name="grupo"  [(ngModel)]="params._grupo">
							  <mat-option *ngFor="let grp of grupos" [value]="grp.id">
								  {{grp.descripcion}}
							  </mat-option>
						  </mat-select>
					  </mat-form-field>
					<button mat-button color="accent" type="submit" style="margin-left: 3px;">GENERAR</button>
				</form>
				<ng-template [ngIf]="cargando">
					<mat-progress-bar mode="query"></mat-progress-bar>
				</ng-template>
			</mat-card-content>
		</mat-card>
	</div>
</div>
<!-- Inicia gráficas de ventas -->
<div class="row">
	<div class="col m12 s12">
		<app-graficas-ventas #cmpGraficas [datos]="datosGraficas"></app-graficas-ventas>
	</div>
</div>
<!-- Finaliza gráficas de ventas -->
<mat-grid-list cols="5" rowHeight="125px" *ngIf="estadistica.length > 0">
	<mat-grid-tile *ngFor="let data of estadistica">
		<mat-card>
  		<mat-card-title>{{ data[0] }}</mat-card-title>
			<mat-card-content>
				{{ data[1] }}
			</mat-card-content>
		</mat-card>
	</mat-grid-tile>
</mat-grid-list>

<mat-grid-list cols="1" rowHeight="400px">
  <mat-grid-tile>
  	<mat-card>
  		<mat-card-title>Últimos {{ ultimosDias }} días</mat-card-title>
			<mat-card-content>
				<canvas baseChart
					[datasets]="diasData"
					[labels]="diasLabels"
					[options]="chartOptions"
					[chartType]="'line'">
				</canvas>
			</mat-card-content>
		</mat-card>
  </mat-grid-tile>
</mat-grid-list>

<mat-grid-list cols="3" rowHeight="350px">
  <mat-grid-tile>
  	<mat-card>
  		<mat-card-title>Días de la semana</mat-card-title>
			<mat-card-content>
				<canvas baseChart
					[datasets]="semanaData"
					[labels]="semanaLabels"
					[options]="pieOptions"
					[chartType]="'pie'">
				</canvas>
			</mat-card-content>
		</mat-card>
  </mat-grid-tile>
  <mat-grid-tile [colspan]="2">
  	<mat-card>
  		<mat-card-title>Horario</mat-card-title>
			<mat-card-content>
				<canvas baseChart
					[datasets]="horarioData"
					[labels]="horarioLabels"
					[options]="chartOptions"
					[chartType]="'bar'">
				</canvas>
			</mat-card-content>
		</mat-card>
  </mat-grid-tile>
</mat-grid-list>

<mat-grid-list cols="3" rowHeight="350px">
  <mat-grid-tile [colspan]="2">
  	<mat-card>
  		<mat-card-title>Popular</mat-card-title>
	  	<mat-card-content>
				<canvas baseChart
					[datasets]="popularData"
					[labels]="popularLabels"
					[options]="chartOptions"
					[chartType]="'horizontalBar'">
				</canvas>
    	</mat-card-content>
		</mat-card>
  </mat-grid-tile>
  <mat-grid-tile>
  	<mat-card>
  		<mat-card-title>A domicilio</mat-card-title>
			<mat-card-content>
				<canvas baseChart
					[datasets]="domicilioData"
					[labels]="domicilioLabels"
					[options]="pieOptions"
					[chartType]="'pie'">
				</canvas>
			</mat-card-content>
		</mat-card>
  </mat-grid-tile>
</mat-grid-list>

<mat-grid-list cols="2" rowHeight="450px">
  <mat-grid-tile>
  	<mat-card>
  		<mat-card-title>Mesero</mat-card-title>
			<mat-card-content>
				<canvas baseChart
					[datasets]="meseroData"
					[labels]="meseroLabels"
					[options]="horizontalOptions"
					[chartType]="'horizontalBar'">
				</canvas>
			</mat-card-content>
		</mat-card>
  </mat-grid-tile>
  <mat-grid-tile>
  	<mat-card>
  		<mat-card-title>Sede</mat-card-title>
			<mat-card-content>
				<canvas baseChart
					[datasets]="sedeData"
					[labels]="sedeLabels"
					[options]="horizontalOptions"
					[chartType]="'horizontalBar'">
				</canvas>
			</mat-card-content>
		</mat-card>
  </mat-grid-tile>
</mat-grid-list>

<mat-grid-list cols="1" rowHeight="425px">
  <mat-grid-tile>
  	<mat-card>
  		<mat-card-title>Por semanas</mat-card-title>
			<mat-card-content>
				<canvas baseChart
					[datasets]="wlistaData"
					[labels]="wlistaLabels"
					[options]="chartOptions"
					[chartType]="'line'">
				</canvas>
			</mat-card-content>
		</mat-card>
  </mat-grid-tile>
</mat-grid-list>

<mat-grid-list cols="1" rowHeight="550px">
  <mat-grid-tile>
		<mat-card>
			<mat-card-actions>
				<button ej-button id='export'>Export</button>
			</mat-card-actions>
			<mat-card-content >
				<ejs-pivotview #pivotview id='PivotView' [dataSourceSettings]=pivotData width='100%' height='400' allowExcelExport='true' showFieldList="true"></ejs-pivotview>
			</mat-card-content>
		</mat-card>
	</mat-grid-tile>
</mat-grid-list>